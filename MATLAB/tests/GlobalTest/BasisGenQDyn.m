classdef(Abstract) BasisGenQDyn < Dyn
    %BASISGENQDYN wird von MAPLE/PYTHON generiert und enthaelt die
    %Berechnung der Ableitungen
    
    properties
        F;
        J;
        H;
        
    end
    
    properties(GetAccess=private, SetAccess = protected)
        isEmptyF;
        isEmptyJ;
        isEmptyH;
    end
    
    methods
        function cBGQD = BasisGenQDyn()
            cBGQD@Dyn();
            cBGQD.emptyResults();
        end
        
        function emptyResults(obj)
            
            obj.F   = [];
            obj.J  = [];
            obj.H = [];
            
            obj.isEmptyF = true;
            obj.isEmptyJ = true;
            obj.isEmptyH = true;
        end
        
        function res = get.F(obj)
            if obj.isEmptyF
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                t117 = q(4, :);
t144 = -2 .* t117 .^ 2;
t118 = q(3, :);
t143 = -2 .* t118 .^ 2;
t142 = (d .* kT);
t141 = -t117 ./ 0.2e1;
t140 = -t118 ./ 0.2e1;
t119 = q(2, :);
t139 = -t119 ./ 0.2e1;
t120 = q(1, :);
t138 = t120 ./ 0.2e1;
t137 = 0.1e1 - 0.2e1 .* t119 .^ 2;
t113 = u(4, :);
t97 = (t113 .^ 2);
t115 = u(2, :);
t99 = (t115 .^ 2);
t136 = (-t97 - t99);
t116 = u(1, :);
t100 = (t116 .^ 2);
t114 = u(3, :);
t98 = (t114 .^ 2);
t135 = (t100 + t98);
t134 = t118 .* t117;
t133 = t119 .* t117;
t132 = t119 .* t118;
t131 = t120 .* t117;
t130 = t120 .* t118;
t129 = t120 .* t119;
t128 = 2 .* g;
t110 = v(3, :);
t127 = 2 .* t110;
t111 = v(2, :);
t126 = 2 .* t111;
t112 = v(1, :);
t125 = 2 .* t112;
t124 = t143 + t137;
t123 = t130 - t133;
t122 = -t129 - t134;
t121 = ((t114 - t113 + t116 - t115) .* IM);
t109 = Iges(1);
t108 = Iges(2);
t107 = Iges(3);
t106 = omega(1, :);
t105 = omega(2, :);
t104 = omega(3, :);
t1 = [((1 + t143 + t144) .* t112) + (-t131 + t132) .* t126 + (t130 + t133) .* t127; (t131 + t132) .* t125 + (t144 + t137) .* t111 + (-t129 + t134) .* t127; -t123 .* t125 - t122 .* t126 + t124 .* t110; t106 .* t139 + t105 .* t140 + t104 .* t141; t106 .* t138 + t105 .* t141 + t118 .* t104 ./ 0.2e1; t117 .* t106 ./ 0.2e1 + t105 .* t138 + t104 .* t139; t106 .* t140 + t119 .* t105 ./ 0.2e1 + t104 .* t138; -t105 .* t110 + t104 .* t111 + t123 .* t128; -t104 .* t112 + t106 .* t110 + t122 .* t128; ((t135 - t136) .* kT + (-t106 .* t111 + t105 .* t112 - t124 .* g) .* m) ./ m; -((-t99 + t97) .* t142 + ((t107 - t108) .* t104 + t121) .* t105) ./ t109; ((-t100 + t98) .* t142 + ((-t109 + t107) .* t104 + t121) .* t106) ./ t108; -((t108 - t109) .* t106 .* t105 + (t135 + t136) .* kQ) ./ t107;];

                
                obj.F = t1;
                obj.isEmptyF = false;
            end
            res = obj.F;
        end
        
        function res = get.J(obj)
            if obj.isEmptyJ
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                t372 = d .* kT;
t342 = q(3, :);
t371 = g .* t342;
t343 = q(2, :);
t370 = g .* t343;
t344 = q(1, :);
t369 = g .* t344;
t368 = 1 - 2 .* t343 .^ 2;
t329 = omega(2, :);
t367 = IM .* t329;
t331 = Iges(3);
t325 = 1 ./ t331;
t366 = kQ .* t325;
t365 = -2 .* t372;
t364 = 2 .* t372;
t332 = Iges(2);
t326 = 0.1e1 ./ t332;
t330 = omega(1, :);
t363 = (t326 .* t330);
t333 = Iges(1);
t327 = 0.1e1 ./ t333;
t362 = (t327 .* t329);
t334 = v(3, :);
t361 = t334 .* t343;
t360 = t334 .* t344;
t335 = v(2, :);
t341 = q(4, :);
t359 = t335 .* t341;
t358 = t335 .* t344;
t336 = v(1, :);
t357 = t336 .* t342;
t356 = t336 .* t344;
t355 = t344 .* t341;
t354 = t344 .* t342;
t353 = t344 .* t343;
t352 = -2 .* t366;
t351 = 2 .* t366;
t350 = 2 .* kT ./ m;
t349 = IM .* t362;
t348 = IM .* t363;
t347 = (t325 .* (t332 - t333));
t328 = omega(3, :);
t337 = u(4, :);
t338 = u(3, :);
t339 = u(2, :);
t340 = u(1, :);
t346 = (t331 .* t328 + (t338 + t340 - t337 - t339) .* IM);
t324 = t344 ./ 0.2e1;
t323 = -t343 ./ 0.2e1;
t322 = -t342 ./ 0.2e1;
t321 = -t341 ./ 0.2e1;
t319 = -2 .* t342 .^ 2;
t318 = -2 .* t341 .^ 2;
t315 = -t330 ./ 0.2e1;
t314 = t330 ./ 0.2e1;
t313 = -t329 ./ 0.2e1;
t312 = t329 ./ 0.2e1;
t311 = -t328 ./ 0.2e1;
t310 = t328 ./ 0.2e1;
t309 = -2 .* t370;
t308 = -2 .* g .* t341;
t307 = IM .* t330;
t306 = t343 .* t342;
t305 = t343 .* t341;
t304 = t342 .* t341;
t303 = t336 .* t343;
t302 = t336 .* t341;
t301 = t335 .* t343;
t300 = t335 .* t342;
t299 = t334 .* t342;
t298 = t334 .* t341;
t1 = [1 4 -2 .* t359 + 2 .* t299; 1 5 2 .* t300 + 2 .* t298; 1 6 -4 .* t357 + 2 .* t301 + 2 .* t360; 1 7 -4 .* t302 - 2 .* t358 + 2 .* t361; 1 8 1 + t319 + t318; 1 9 -2 .* t355 + 2 .* t306; 1 10 2 .* t354 + 2 .* t305; 2 4 2 .* t302 - 2 .* t361; 2 5 2 .* t357 - 4 .* t301 - 2 .* t360; 2 6 2 .* t303 + 2 .* t298; 2 7 2 .* t356 - 4 .* t359 + 2 .* t299; 2 8 2 .* t355 + 2 .* t306; 2 9 t318 + t368; 2 10 -2 .* t353 + 2 .* t304; 3 4 -2 .* t357 + 2 .* t301; 3 5 2 .* t302 + 2 .* t358 - 4 .* t361; 3 6 -2 .* t356 + 2 .* t359 - 4 .* t299; 3 7 2 .* t303 + 2 .* t300; 3 8 -2 .* t354 + 2 .* t305; 3 9 2 .* t353 + 2 .* t304; 3 10 t319 + t368; 4 5 t315; 4 6 t313; 4 7 t311; 4 11 t323; 4 12 t322; 4 13 t321; 5 4 t314; 5 6 t310; 5 7 t313; 5 11 t324; 5 12 t321; 5 13 t342 ./ 0.2e1; 6 4 t312; 6 5 t311; 6 7 t314; 6 11 t341 ./ 0.2e1; 6 12 t324; 6 13 t323; 7 4 t310; 7 5 t312; 7 6 t315; 7 11 t322; 7 12 t343 ./ 0.2e1; 7 13 t324; 8 4 2 .* t371; 8 5 t308; 8 6 2 .* t369; 8 7 t309; 8 9 t328; 8 10 -t329; 8 12 -t334; 8 13 t335; 9 4 t309; 9 5 -2 .* t369; 9 6 t308; 9 7 -2 .* t371; 9 8 -t328; 9 10 t330; 9 11 t334; 9 13 -t336; 10 5 4 .* t370; 10 6 4 .* t371; 10 8 t329; 10 9 -t330; 10 11 -t335; 10 12 t336; 10 14 t340 .* t350; 10 15 t339 .* t350; 10 16 t338 .* t350; 10 17 t337 .* t350; 11 12 -(-t328 .* t332 + t346) .* t327; 11 13 -(t331 - t332) .* t362; 11 14 -t349; 11 15 -(t339 .* t365 - t367) .* t327; 11 16 -t349; 11 17 -(t337 .* t364 - t367) .* t327; 12 11 (-t328 .* t333 + t346) .* t326; 12 13 (-t333 + t331) .* t363; 12 14 ((t340 .* t365) + t307) .* t326; 12 15 -t348; 12 16 ((t338 .* t364) + t307) .* t326; 12 17 -t348; 13 11 -t329 .* t347; 13 12 -t330 .* t347; 13 14 t340 .* t352; 13 15 t339 .* t351; 13 16 t338 .* t352; 13 17 t337 .* t351;];

                
                obj.J = t1;
                obj.isEmptyJ = false;
            end
            res = obj.J;
        end
        
        function res = get.H(obj)
            if obj.isEmptyH
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                onesV = ones(1, obj.environment.n_timepoints); %Korregiere die Matrix Dimension
                
                t564 = g .* onesV;
t563 = kT .* onesV;
t537 = Iges(3);
t562 = onesV ./ t537;
t538 = Iges(2);
t533 = 1 ./ t538;
t561 = onesV .* t533;
t539 = Iges(1);
t534 = 1 ./ t539;
t560 = onesV .* t534;
t559 = v(3, :) .* onesV;
t558 = v(2, :) .* onesV;
t557 = v(1, :) .* onesV;
t556 = q(4, :) .* onesV;
t555 = q(3, :) .* onesV;
t554 = q(2, :) .* onesV;
t553 = q(1, :) .* onesV;
t552 = d .* t563;
t551 = kQ .* t562;
t550 = (t537 - t538) .* t560;
t549 = (t538 - t539) .* t562;
t548 = t533 .* t552;
t547 = t534 .* t552;
t536 = -onesV ./ 0.2e1;
t535 = onesV ./ 0.2e1;
t531 = -2 .* t564;
t530 = 2 .* t564;
t529 = 4 .* t564;
t528 = 2 ./ m .* t563;
t527 = -2 .* t553;
t526 = 2 .* t553;
t525 = -4 .* t554;
t524 = -2 .* t554;
t523 = 2 .* t554;
t522 = -4 .* t555;
t521 = -2 .* t555;
t520 = 2 .* t555;
t519 = -4 .* t556;
t518 = -2 .* t556;
t517 = 2 .* t556;
t516 = -4 .* t557;
t515 = -2 .* t557;
t514 = 2 .* t557;
t513 = -4 .* t558;
t512 = -2 .* t558;
t511 = 2 .* t558;
t510 = -4 .* t559;
t509 = -2 .* t559;
t508 = 2 .* t559;
t507 = IM .* t560;
t506 = IM .* t561;
t503 = -2 .* t551;
t502 = 2 .* t551;
t501 = (-t539 + t537) .* t561;
t1 = [1 4 6 t508; 1 4 7 t512; 1 4 9 t518; 1 4 10 t520; 1 5 6 t511; 1 5 7 t508; 1 5 9 t520; 1 5 10 t517; 1 6 4 t508; 1 6 5 t511; 1 6 6 t516; 1 6 8 t522; 1 6 9 t523; 1 6 10 t526; 1 7 4 t512; 1 7 5 t508; 1 7 7 t516; 1 7 8 t519; 1 7 9 t527; 1 7 10 t523; 1 8 6 t522; 1 8 7 t519; 1 9 4 t518; 1 9 5 t520; 1 9 6 t523; 1 9 7 t527; 1 10 4 t520; 1 10 5 t517; 1 10 6 t526; 1 10 7 t523; 2 4 5 t509; 2 4 7 t514; 2 4 8 t517; 2 4 10 t524; 2 5 4 t509; 2 5 5 t513; 2 5 6 t514; 2 5 8 t520; 2 5 9 t525; 2 5 10 t527; 2 6 5 t514; 2 6 7 t508; 2 6 8 t523; 2 6 10 t517; 2 7 4 t514; 2 7 6 t508; 2 7 7 t513; 2 7 8 t526; 2 7 9 t519; 2 7 10 t520; 2 8 4 t517; 2 8 5 t520; 2 8 6 t523; 2 8 7 t526; 2 9 5 t525; 2 9 7 t519; 2 10 4 t524; 2 10 5 t527; 2 10 6 t517; 2 10 7 t520; 3 4 5 t511; 3 4 6 t515; 3 4 8 t521; 3 4 9 t523; 3 5 4 t511; 3 5 5 t510; 3 5 7 t514; 3 5 8 t517; 3 5 9 t526; 3 5 10 t525; 3 6 4 t515; 3 6 6 t510; 3 6 7 t511; 3 6 8 t527; 3 6 9 t517; 3 6 10 t522; 3 7 5 t514; 3 7 6 t511; 3 7 8 t523; 3 7 9 t520; 3 8 4 t521; 3 8 5 t517; 3 8 6 t527; 3 8 7 t523; 3 9 4 t523; 3 9 5 t526; 3 9 6 t517; 3 9 7 t520; 3 10 5 t525; 3 10 6 t522; 4 5 11 t536; 4 6 12 t536; 4 7 13 t536; 4 11 5 t536; 4 12 6 t536; 4 13 7 t536; 5 4 11 t535; 5 6 13 t535; 5 7 12 t536; 5 11 4 t535; 5 12 7 t536; 5 13 6 t535; 6 4 12 t535; 6 5 13 t536; 6 7 11 t535; 6 11 7 t535; 6 12 4 t535; 6 13 5 t536; 7 4 13 t535; 7 5 12 t535; 7 6 11 t536; 7 11 6 t536; 7 12 5 t535; 7 13 4 t535; 8 4 6 t530; 8 5 7 t531; 8 6 4 t530; 8 7 5 t531; 8 9 13 onesV; 8 10 12 -onesV; 8 12 10 -onesV; 8 13 9 onesV; 9 4 5 t531; 9 5 4 t531; 9 6 7 t531; 9 7 6 t531; 9 8 13 -onesV; 9 10 11 onesV; 9 11 10 onesV; 9 13 8 -onesV; 10 5 5 t529; 10 6 6 t529; 10 8 12 onesV; 10 9 11 -onesV; 10 11 9 -onesV; 10 12 8 onesV; 10 14 14 t528; 10 15 15 t528; 10 16 16 t528; 10 17 17 t528; 11 12 13 -t550; 11 12 14 -t507; 11 12 15 t507; 11 12 16 -t507; 11 12 17 t507; 11 13 12 -t550; 11 14 12 -t507; 11 15 12 t507; 11 15 15 2 .* t547; 11 16 12 -t507; 11 17 12 t507; 11 17 17 -2 .* t547; 12 11 13 t501; 12 11 14 t506; 12 11 15 -t506; 12 11 16 t506; 12 11 17 -t506; 12 13 11 t501; 12 14 11 t506; 12 14 14 -2 .* t548; 12 15 11 -t506; 12 16 11 t506; 12 16 16 2 .* t548; 12 17 11 -t506; 13 11 12 -t549; 13 12 11 -t549; 13 14 14 t503; 13 15 15 t502; 13 16 16 t503; 13 17 17 t502;];

                
                obj.H = t1;
                obj.isEmptyH = false;
            end
            res = obj.H;
        end
        
        function res = FTilde(obj, y, u)
            [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj, y, u);
            t706 = q(4);
t689 = t706 ^ 2;
t707 = q(3);
t690 = t707 ^ 2;
t708 = q(2);
t691 = t708 ^ 2;
t709 = q(1);
t744 = 1 - t691 - t709 ^ 2 - t689 - t690;
t739 = -2 * t689;
t738 = -2 * t690;
t737 = (d * kT);
t736 = -t706 / 0.2e1;
t735 = -t707 / 0.2e1;
t734 = -t708 / 0.2e1;
t733 = t709 / 0.2e1;
t732 = 1 - 2 * t691;
t731 = t707 * t706;
t730 = t708 * t706;
t729 = t708 * t707;
t728 = t709 * t706;
t727 = t709 * t707;
t726 = t709 * t708;
t702 = u(4);
t685 = (t702 ^ 2);
t704 = u(2);
t687 = (t704 ^ 2);
t725 = (-t685 - t687);
t703 = u(3);
t686 = (t703 ^ 2);
t705 = u(1);
t688 = (t705 ^ 2);
t724 = (t686 + t688);
t723 = 2 * g;
t699 = v(3);
t722 = 2 * t699;
t700 = v(2);
t721 = 2 * t700;
t701 = v(1);
t720 = 2 * t701;
t718 = t738 + t732;
t716 = t727 - t730;
t715 = -t726 - t731;
t714 = ((t703 - t702 + t705 - t704) * IM);
t698 = Iges(1);
t697 = Iges(2);
t696 = Iges(3);
t695 = omega(1);
t694 = omega(2);
t693 = omega(3);
t1 = [((1 + t738 + t739) * t701) + (-t728 + t729) * t721 + (t727 + t730) * t722; (t728 + t729) * t720 + ((t739 + t732) * t700) + (-t726 + t731) * t722; -t716 * t720 - t715 * t721 + (t718 * t699); t695 * t734 + t694 * t735 + t693 * t736 + (t744 * t709); t695 * t733 + t694 * t736 + t707 * t693 / 0.2e1 + t744 * t708; t706 * t695 / 0.2e1 + t694 * t733 + t693 * t734 + t744 * t707; t695 * t735 + t708 * t694 / 0.2e1 + t693 * t733 + t744 * t706; -t694 * t699 + t693 * t700 + t716 * t723; -t693 * t701 + t695 * t699 + t715 * t723; ((t724 - t725) * kT + (-t695 * t700 + t694 * t701 - (t718 * g)) * m) / m; -((-t687 + t685) * t737 + ((t696 - t697) * t693 + t714) * t694) / t698; ((-t688 + t686) * t737 + ((-t698 + t696) * t693 + t714) * t695) / t697; -((t697 - t698) * t695 * t694 + (t724 + t725) * kQ) / t696;];

            res = t1;
        end
        
        function res = JTilde(obj, y, u)
            [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj, y, u);
            t1008 = d * kT;
t976 = q(3);
t1007 = g * t976;
t977 = q(2);
t1006 = g * t977;
t978 = q(1);
t1005 = g * t978;
t960 = t977 ^ 2;
t1004 = 1 - 2 * t960;
t963 = omega(2);
t1003 = IM * t963;
t965 = Iges(3);
t955 = 1 / t965;
t1002 = kQ * t955;
t1001 = -2 * t1008;
t1000 = 2 * t1008;
t966 = Iges(2);
t956 = 0.1e1 / t966;
t964 = omega(1);
t999 = (t956 * t964);
t967 = Iges(1);
t957 = 0.1e1 / t967;
t998 = (t957 * t963);
t968 = v(3);
t997 = t968 * t977;
t996 = t968 * t978;
t969 = v(2);
t975 = q(4);
t995 = t969 * t975;
t994 = t969 * t978;
t970 = v(1);
t993 = t970 * t976;
t992 = t970 * t978;
t991 = t978 * t975;
t990 = t978 * t976;
t989 = t978 * t977;
t988 = -2 * t1002;
t987 = 2 * t1002;
t986 = 2 * kT / m;
t958 = t975 ^ 2;
t959 = t976 ^ 2;
t985 = 1 - t958 - t959;
t961 = t978 ^ 2;
t984 = 1 - t960 - t961;
t983 = IM * t998;
t982 = IM * t999;
t981 = (t955 * (t966 - t967));
t962 = omega(3);
t971 = u(4);
t972 = u(3);
t973 = u(2);
t974 = u(1);
t980 = (t965 * t962 + (t972 + t974 - t971 - t973) * IM);
t954 = t978 / 0.2e1;
t953 = -t977 / 0.2e1;
t952 = -t976 / 0.2e1;
t951 = -t975 / 0.2e1;
t949 = -2 * t959;
t948 = -2 * t958;
t945 = -t964 / 0.2e1;
t944 = t964 / 0.2e1;
t943 = -t963 / 0.2e1;
t942 = t963 / 0.2e1;
t941 = -t962 / 0.2e1;
t940 = t962 / 0.2e1;
t939 = -2 * t1006;
t938 = -0.2e1 * g * t975;
t937 = IM * t964;
t936 = t977 * t976;
t935 = t977 * t975;
t934 = t976 * t975;
t933 = t970 * t977;
t932 = t970 * t975;
t931 = t969 * t977;
t930 = t969 * t976;
t929 = t968 * t976;
t928 = t968 * t975;
t927 = -2 * t989;
t926 = -2 * t990;
t925 = -2 * t991;
t924 = -0.2e1 * t936;
t923 = -0.2e1 * t935;
t922 = -0.2e1 * t934;
t1 = [1 4 -(2 * t995) + 0.2e1 * t929; 1 5 0.2e1 * t930 + 0.2e1 * t928; 1 6 -(4 * t993) + 0.2e1 * t931 + (2 * t996); 1 7 -0.4e1 * t932 - (2 * t994) + (2 * t997); 1 8 1 + t949 + t948; 1 9 -(2 * t991) + 0.2e1 * t936; 1 10 (2 * t990) + 0.2e1 * t935; 2 4 0.2e1 * t932 - (2 * t997); 2 5 (2 * t993) - 0.4e1 * t931 - (2 * t996); 2 6 0.2e1 * t933 + 0.2e1 * t928; 2 7 (2 * t992) - (4 * t995) + 0.2e1 * t929; 2 8 (2 * t991) + 0.2e1 * t936; 2 9 t948 + t1004; 2 10 -(2 * t989) + 0.2e1 * t934; 3 4 -(2 * t993) + 0.2e1 * t931; 3 5 0.2e1 * t932 + (2 * t994) - (4 * t997); 3 6 -(2 * t992) + (2 * t995) - 0.4e1 * t929; 3 7 0.2e1 * t933 + 0.2e1 * t930; 3 8 -(2 * t990) + 0.2e1 * t935; 3 9 (2 * t989) + 0.2e1 * t934; 3 10 t949 + t1004; 4 4 -3 * t961 - t960 + t985; 4 5 t945 + t927; 4 6 t943 + t926; 4 7 t941 + t925; 4 11 t953; 4 12 t952; 4 13 t951; 5 4 t944 + t927; 5 5 -t961 - 3 * t960 + t985; 5 6 t940 + t924; 5 7 t943 + t923; 5 11 t954; 5 12 t951; 5 13 t976 / 0.2e1; 6 4 t942 + t926; 6 5 t941 + t924; 6 6 -3 * t959 - t958 + t984; 6 7 t944 + t922; 6 11 t975 / 0.2e1; 6 12 t954; 6 13 t953; 7 4 t940 + t925; 7 5 t942 + t923; 7 6 t945 + t922; 7 7 -t959 - 3 * t958 + t984; 7 11 t952; 7 12 t977 / 0.2e1; 7 13 t954; 8 4 2 * t1007; 8 5 t938; 8 6 2 * t1005; 8 7 t939; 8 9 t962; 8 10 -t963; 8 12 -t968; 8 13 t969; 9 4 t939; 9 5 -2 * t1005; 9 6 t938; 9 7 -2 * t1007; 9 8 -t962; 9 10 t964; 9 11 t968; 9 13 -t970; 10 5 4 * t1006; 10 6 4 * t1007; 10 8 t963; 10 9 -t964; 10 11 -t969; 10 12 t970; 10 14 t974 * t986; 10 15 t973 * t986; 10 16 t972 * t986; 10 17 t971 * t986; 11 12 -(-t962 * t966 + t980) * t957; 11 13 -(t965 - t966) * t998; 11 14 -t983; 11 15 -(t973 * t1001 - t1003) * t957; 11 16 -t983; 11 17 -(t971 * t1000 - t1003) * t957; 12 11 (-t962 * t967 + t980) * t956; 12 13 (-t967 + t965) * t999; 12 14 ((t974 * t1001) + t937) * t956; 12 15 -t982; 12 16 ((t972 * t1000) + t937) * t956; 12 17 -t982; 13 11 -t963 * t981; 13 12 -t964 * t981; 13 14 t974 * t988; 13 15 t973 * t987; 13 16 t972 * t988; 13 17 t971 * t987;];

            res = t1;
        end
        
        function res = getJTilde(obj, y, u)
            J_ = obj.JTilde(y, u);
            res = sparse(J_(:, 1), J_(:, 2), J_(:, 3), 13, 17);
        end
        
        function res = HTilde(obj, y, u)
            [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj, y, u);
            ones = 1;
            t1200 = g * ones;
t1199 = kT * ones;
t1173 = Iges(3);
t1198 = ones / t1173;
t1174 = Iges(2);
t1169 = 1 / t1174;
t1197 = ones * t1169;
t1175 = Iges(1);
t1170 = 1 / t1175;
t1196 = ones * t1170;
t1195 = v(3) * ones;
t1194 = v(2) * ones;
t1193 = v(1) * ones;
t1192 = q(4) * ones;
t1191 = q(3) * ones;
t1190 = q(2) * ones;
t1189 = q(1) * ones;
t1188 = d * t1199;
t1187 = kQ * t1198;
t1186 = (t1173 - t1174) * t1196;
t1185 = (t1174 - t1175) * t1198;
t1184 = t1169 * t1188;
t1183 = t1170 * t1188;
t1172 = -ones / 0.2e1;
t1171 = ones / 0.2e1;
t1167 = -2 * t1200;
t1166 = 2 * t1200;
t1165 = 4 * t1200;
t1164 = 2 / m * t1199;
t1163 = -2 * t1189;
t1162 = 2 * t1189;
t1161 = -4 * t1190;
t1160 = -2 * t1190;
t1159 = 2 * t1190;
t1158 = -4 * t1191;
t1157 = -2 * t1191;
t1156 = 2 * t1191;
t1155 = -4 * t1192;
t1154 = -2 * t1192;
t1153 = 2 * t1192;
t1152 = -4 * t1193;
t1151 = -2 * t1193;
t1150 = 2 * t1193;
t1149 = -4 * t1194;
t1148 = -2 * t1194;
t1147 = 2 * t1194;
t1146 = -4 * t1195;
t1145 = -2 * t1195;
t1144 = 2 * t1195;
t1143 = IM * t1196;
t1142 = IM * t1197;
t1139 = -2 * t1187;
t1138 = 2 * t1187;
t1137 = (-t1175 + t1173) * t1197;
t1 = [1 4 6 t1144; 1 4 7 t1148; 1 4 9 t1154; 1 4 10 t1156; 1 5 6 t1147; 1 5 7 t1144; 1 5 9 t1156; 1 5 10 t1153; 1 6 4 t1144; 1 6 5 t1147; 1 6 6 t1152; 1 6 8 t1158; 1 6 9 t1159; 1 6 10 t1162; 1 7 4 t1148; 1 7 5 t1144; 1 7 7 t1152; 1 7 8 t1155; 1 7 9 t1163; 1 7 10 t1159; 1 8 6 t1158; 1 8 7 t1155; 1 9 4 t1154; 1 9 5 t1156; 1 9 6 t1159; 1 9 7 t1163; 1 10 4 t1156; 1 10 5 t1153; 1 10 6 t1162; 1 10 7 t1159; 2 4 5 t1145; 2 4 7 t1150; 2 4 8 t1153; 2 4 10 t1160; 2 5 4 t1145; 2 5 5 t1149; 2 5 6 t1150; 2 5 8 t1156; 2 5 9 t1161; 2 5 10 t1163; 2 6 5 t1150; 2 6 7 t1144; 2 6 8 t1159; 2 6 10 t1153; 2 7 4 t1150; 2 7 6 t1144; 2 7 7 t1149; 2 7 8 t1162; 2 7 9 t1155; 2 7 10 t1156; 2 8 4 t1153; 2 8 5 t1156; 2 8 6 t1159; 2 8 7 t1162; 2 9 5 t1161; 2 9 7 t1155; 2 10 4 t1160; 2 10 5 t1163; 2 10 6 t1153; 2 10 7 t1156; 3 4 5 t1147; 3 4 6 t1151; 3 4 8 t1157; 3 4 9 t1159; 3 5 4 t1147; 3 5 5 t1146; 3 5 7 t1150; 3 5 8 t1153; 3 5 9 t1162; 3 5 10 t1161; 3 6 4 t1151; 3 6 6 t1146; 3 6 7 t1147; 3 6 8 t1163; 3 6 9 t1153; 3 6 10 t1158; 3 7 5 t1150; 3 7 6 t1147; 3 7 8 t1159; 3 7 9 t1156; 3 8 4 t1157; 3 8 5 t1153; 3 8 6 t1163; 3 8 7 t1159; 3 9 4 t1159; 3 9 5 t1162; 3 9 6 t1153; 3 9 7 t1156; 3 10 5 t1161; 3 10 6 t1158; 4 4 4 -6 * t1189; 4 4 5 t1160; 4 4 6 t1157; 4 4 7 t1154; 4 5 4 t1160; 4 5 5 t1163; 4 5 11 t1172; 4 6 4 t1157; 4 6 6 t1163; 4 6 12 t1172; 4 7 4 t1154; 4 7 7 t1163; 4 7 13 t1172; 4 11 5 t1172; 4 12 6 t1172; 4 13 7 t1172; 5 4 4 t1160; 5 4 5 t1163; 5 4 11 t1171; 5 5 4 t1163; 5 5 5 -6 * t1190; 5 5 6 t1157; 5 5 7 t1154; 5 6 5 t1157; 5 6 6 t1160; 5 6 13 t1171; 5 7 5 t1154; 5 7 7 t1160; 5 7 12 t1172; 5 11 4 t1171; 5 12 7 t1172; 5 13 6 t1171; 6 4 4 t1157; 6 4 6 t1163; 6 4 12 t1171; 6 5 5 t1157; 6 5 6 t1160; 6 5 13 t1172; 6 6 4 t1163; 6 6 5 t1160; 6 6 6 -6 * t1191; 6 6 7 t1154; 6 7 6 t1154; 6 7 7 t1157; 6 7 11 t1171; 6 11 7 t1171; 6 12 4 t1171; 6 13 5 t1172; 7 4 4 t1154; 7 4 7 t1163; 7 4 13 t1171; 7 5 5 t1154; 7 5 7 t1160; 7 5 12 t1171; 7 6 6 t1154; 7 6 7 t1157; 7 6 11 t1172; 7 7 4 t1163; 7 7 5 t1160; 7 7 6 t1157; 7 7 7 -6 * t1192; 7 11 6 t1172; 7 12 5 t1171; 7 13 4 t1171; 8 4 6 t1166; 8 5 7 t1167; 8 6 4 t1166; 8 7 5 t1167; 8 9 13 ones; 8 10 12 -ones; 8 12 10 -ones; 8 13 9 ones; 9 4 5 t1167; 9 5 4 t1167; 9 6 7 t1167; 9 7 6 t1167; 9 8 13 -ones; 9 10 11 ones; 9 11 10 ones; 9 13 8 -ones; 10 5 5 t1165; 10 6 6 t1165; 10 8 12 ones; 10 9 11 -ones; 10 11 9 -ones; 10 12 8 ones; 10 14 14 t1164; 10 15 15 t1164; 10 16 16 t1164; 10 17 17 t1164; 11 12 13 -t1186; 11 12 14 -t1143; 11 12 15 t1143; 11 12 16 -t1143; 11 12 17 t1143; 11 13 12 -t1186; 11 14 12 -t1143; 11 15 12 t1143; 11 15 15 2 * t1183; 11 16 12 -t1143; 11 17 12 t1143; 11 17 17 -2 * t1183; 12 11 13 t1137; 12 11 14 t1142; 12 11 15 -t1142; 12 11 16 t1142; 12 11 17 -t1142; 12 13 11 t1137; 12 14 11 t1142; 12 14 14 -2 * t1184; 12 15 11 -t1142; 12 16 11 t1142; 12 16 16 2 * t1184; 12 17 11 -t1142; 13 11 12 -t1185; 13 12 11 -t1185; 13 14 14 t1139; 13 15 15 t1138; 13 16 16 t1139; 13 17 17 t1138;];

            res = t1;
        end
        
        function res = getHTilde(obj, y, u)
            
            res = zeros(13, 17, 17);
            H_ = obj.HTilde(y, u);
            for i = 1:size(H_, 1)
                res(H_(i, 1), H_(i, 2), H_(i, 3)) = H_(i, 4);
            end
        end
        
        function [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj, varargin)
            
            if nargin == 3            
                y = varargin{1};
                u = varargin{2};
            else
                y = obj.state;
                u   = obj.contr;
            end
            q   = y(4:7    , :);
            v   = y(8:10   , :);
            omega   = y(11:13  , :);
            
            
            
            Iges = obj.robot.I;
            IM = obj.robot.I_M;
            m = obj.robot.m;
            
            kT  = obj.robot.kT;
            kQ  = obj.robot.kQ;
            d   = obj.robot.d;
            g   = obj.environment.g;
        end
        
    end
    
end