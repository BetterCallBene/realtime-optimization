classdef(Abstract) BasisGenQDyn < Dyn
    %BASISGENQDYN wird von MAPLE/PYTHON generiert und enthaelt die
    %Berechnung der Ableitungen
    
    properties
        F;
        J;
        H;
        
    end
    
    properties(GetAccess=private, SetAccess = protected)
        isEmptyF;
        isEmptyJ;
        isEmptyH;
    end
    
    methods
        function cBGQD = BasisGenQDyn()
            cBGQD@Dyn();
            cBGQD.emptyResults();
        end
        
        function emptyResults(obj)
            
            obj.F   = [];
            obj.J  = [];
            obj.H = [];
            
            obj.isEmptyF = true;
            obj.isEmptyJ = true;
            obj.isEmptyH = true;
        end
        
        function res = get.F(obj)
            if obj.isEmptyF
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                t117 = q(4, :);
t144 = -2 .* t117 .^ 2;
t118 = q(3, :);
t143 = -2 .* t118 .^ 2;
t142 = (d .* kT);
t141 = -t117 ./ 0.2e1;
t140 = -t118 ./ 0.2e1;
t119 = q(2, :);
t139 = -t119 ./ 0.2e1;
t120 = q(1, :);
t138 = t120 ./ 0.2e1;
t137 = 0.1e1 - 0.2e1 .* t119 .^ 2;
t113 = u(4, :);
t97 = (t113 .^ 2);
t115 = u(2, :);
t99 = (t115 .^ 2);
t136 = (-t97 - t99);
t116 = u(1, :);
t100 = (t116 .^ 2);
t114 = u(3, :);
t98 = (t114 .^ 2);
t135 = (t100 + t98);
t134 = t118 .* t117;
t133 = t119 .* t117;
t132 = t119 .* t118;
t131 = t120 .* t117;
t130 = t120 .* t118;
t129 = t120 .* t119;
t128 = 2 .* g;
t110 = v(3, :);
t127 = 2 .* t110;
t111 = v(2, :);
t126 = 2 .* t111;
t112 = v(1, :);
t125 = 2 .* t112;
t124 = t143 + t137;
t123 = t130 - t133;
t122 = -t129 - t134;
t121 = ((t114 - t113 + t116 - t115) .* IM);
t109 = Iges(1);
t108 = Iges(2);
t107 = Iges(3);
t106 = omega(1, :);
t105 = omega(2, :);
t104 = omega(3, :);
t1 = [((1 + t143 + t144) .* t112) + (-t131 + t132) .* t126 + (t130 + t133) .* t127; (t131 + t132) .* t125 + (t144 + t137) .* t111 + (-t129 + t134) .* t127; -t123 .* t125 - t122 .* t126 + t124 .* t110; (t106 .* t139 + t105 .* t140 + t104 .* t141) .* t120; (t106 .* t138 + t105 .* t141 + t118 .* t104 ./ 0.2e1) .* t119; (t117 .* t106 ./ 0.2e1 + t105 .* t138 + t104 .* t139) .* t118; (t104 .* t138 + t119 .* t105 ./ 0.2e1 + t106 .* t140) .* t117; -t105 .* t110 + t104 .* t111 + t123 .* t128; -t104 .* t112 + t106 .* t110 + t122 .* t128; ((t135 - t136) .* kT + (-t106 .* t111 + t105 .* t112 - t124 .* g) .* m) ./ m; -((-t99 + t97) .* t142 + ((t107 - t108) .* t104 + t121) .* t105) ./ t109; ((-t100 + t98) .* t142 + ((-t109 + t107) .* t104 + t121) .* t106) ./ t108; -((t108 - t109) .* t106 .* t105 + (t135 + t136) .* kQ) ./ t107;];

                
                obj.F = t1;
                obj.isEmptyF = false;
            end
            res = obj.F;
        end
        
        function res = get.J(obj)
            if obj.isEmptyJ
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                t378 = d .* kT;
t336 = q(3, :);
t377 = g .* t336;
t337 = q(2, :);
t376 = g .* t337;
t338 = q(1, :);
t375 = g .* t338;
t374 = 1 - 2 .* t337 .^ 2;
t323 = omega(2, :);
t373 = IM .* t323;
t325 = Iges(3);
t319 = 1 ./ t325;
t372 = kQ .* t319;
t371 = -2 .* t378;
t370 = 2 .* t378;
t326 = Iges(2);
t320 = 1 ./ t326;
t324 = omega(1, :);
t369 = t320 .* t324;
t327 = Iges(1);
t321 = 1 ./ t327;
t368 = t321 .* t323;
t328 = v(3, :);
t367 = t328 .* t337;
t366 = t328 .* t338;
t329 = v(2, :);
t335 = q(4, :);
t365 = t329 .* t335;
t364 = t329 .* t338;
t330 = v(1, :);
t363 = t330 .* t336;
t362 = t330 .* t338;
t322 = omega(3, :);
t361 = (t335 .* t322);
t360 = (t335 .* t323);
t359 = (t335 .* t324);
t358 = (t336 .* t322);
t357 = (t336 .* t323);
t356 = (t336 .* t324);
t355 = t337 .* t322;
t354 = t337 .* t323;
t353 = t337 .* t324;
t352 = t338 .* t322;
t351 = t338 .* t323;
t350 = t338 .* t324;
t349 = t338 .* t335;
t348 = t338 .* t336;
t347 = t338 .* t337;
t346 = -2 .* t372;
t345 = 2 .* t372;
t344 = 2 .* kT ./ m;
t343 = IM .* t368;
t342 = IM .* t369;
t341 = t319 .* (t326 - t327);
t331 = u(4, :);
t332 = u(3, :);
t333 = u(2, :);
t334 = u(1, :);
t340 = t325 .* t322 + (t332 + t334 - t331 - t333) .* IM;
t317 = -2 .* t336 .^ 2;
t316 = -2 .* t335 .^ 2;
t313 = -2 .* t376;
t312 = -2 .* g .* t335;
t311 = IM .* t324;
t310 = t337 .* t336;
t309 = t337 .* t335;
t308 = t336 .* t335;
t307 = t330 .* t337;
t306 = t330 .* t335;
t305 = t329 .* t337;
t304 = t329 .* t336;
t303 = t328 .* t336;
t302 = t328 .* t335;
t1 = [1 4 -2 .* t365 + 2 .* t303; 1 5 2 .* t304 + 2 .* t302; 1 6 -4 .* t363 + 2 .* t305 + 2 .* t366; 1 7 -4 .* t306 - 2 .* t364 + 2 .* t367; 1 8 1 + t317 + t316; 1 9 -2 .* t349 + 2 .* t310; 1 10 2 .* t348 + 2 .* t309; 2 4 2 .* t306 - 2 .* t367; 2 5 2 .* t363 - 4 .* t305 - 2 .* t366; 2 6 2 .* t307 + 2 .* t302; 2 7 2 .* t362 - 4 .* t365 + 2 .* t303; 2 8 2 .* t349 + 2 .* t310; 2 9 t316 + t374; 2 10 -2 .* t347 + 2 .* t308; 3 4 -2 .* t363 + 2 .* t305; 3 5 2 .* t306 + 2 .* t364 - 4 .* t367; 3 6 -2 .* t362 + 2 .* t365 - 4 .* t303; 3 7 2 .* t307 + 2 .* t304; 3 8 -2 .* t348 + 2 .* t309; 3 9 2 .* t347 + 2 .* t308; 3 10 t317 + t374; 4 4 -t353 ./ 0.2e1 - t357 ./ 0.2e1 - t361 ./ 0.2e1; 4 5 -t350 ./ 0.2e1; 4 6 -t351 ./ 0.2e1; 4 7 -t352 ./ 0.2e1; 4 11 -t347 ./ 0.2e1; 4 12 -t348 ./ 0.2e1; 4 13 -t349 ./ 0.2e1; 5 4 t353 ./ 0.2e1; 5 5 t350 ./ 0.2e1 - t360 ./ 0.2e1 + t358 ./ 0.2e1; 5 6 t355 ./ 0.2e1; 5 7 -t354 ./ 0.2e1; 5 11 t347 ./ 0.2e1; 5 12 -t309 ./ 0.2e1; 5 13 t310 ./ 0.2e1; 6 4 t357 ./ 0.2e1; 6 5 -t358 ./ 0.2e1; 6 6 t359 ./ 0.2e1 + t351 ./ 0.2e1 - t355 ./ 0.2e1; 6 7 t356 ./ 0.2e1; 6 11 t308 ./ 0.2e1; 6 12 t348 ./ 0.2e1; 6 13 -t310 ./ 0.2e1; 7 4 t361 ./ 0.2e1; 7 5 t360 ./ 0.2e1; 7 6 -t359 ./ 0.2e1; 7 7 -t356 ./ 0.2e1 + t354 ./ 0.2e1 + t352 ./ 0.2e1; 7 11 -t308 ./ 0.2e1; 7 12 t309 ./ 0.2e1; 7 13 t349 ./ 0.2e1; 8 4 2 .* t377; 8 5 t312; 8 6 2 .* t375; 8 7 t313; 8 9 t322; 8 10 -t323; 8 12 -t328; 8 13 t329; 9 4 t313; 9 5 -2 .* t375; 9 6 t312; 9 7 -2 .* t377; 9 8 -t322; 9 10 t324; 9 11 t328; 9 13 -t330; 10 5 4 .* t376; 10 6 4 .* t377; 10 8 t323; 10 9 -t324; 10 11 -t329; 10 12 t330; 10 14 t334 .* t344; 10 15 t333 .* t344; 10 16 t332 .* t344; 10 17 t331 .* t344; 11 12 -(-t322 .* t326 + t340) .* t321; 11 13 -(t325 - t326) .* t368; 11 14 -t343; 11 15 -(t333 .* t371 - t373) .* t321; 11 16 -t343; 11 17 -(t331 .* t370 - t373) .* t321; 12 11 (-t322 .* t327 + t340) .* t320; 12 13 (-t327 + t325) .* t369; 12 14 (t334 .* t371 + t311) .* t320; 12 15 -t342; 12 16 (t332 .* t370 + t311) .* t320; 12 17 -t342; 13 11 -t323 .* t341; 13 12 -t324 .* t341; 13 14 t334 .* t346; 13 15 t333 .* t345; 13 16 t332 .* t346; 13 17 t331 .* t345;];

                
                obj.J = t1;
                obj.isEmptyJ = false;
            end
            res = obj.J;
        end
        
        function res = get.H(obj)
            if obj.isEmptyH
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                onesV = ones(1, obj.environment.n_timepoints); %Korregiere die Matrix Dimension
                
                t624 = g .* onesV;
t623 = kT .* onesV;
t594 = Iges(3);
t622 = onesV ./ t594;
t595 = Iges(2);
t589 = 1 ./ t595;
t621 = onesV .* t589;
t596 = Iges(1);
t590 = 1 ./ t596;
t620 = onesV .* t590;
t619 = (omega(3, :) .* onesV);
t618 = (omega(2, :) .* onesV);
t617 = (omega(1, :) .* onesV);
t616 = v(3, :) .* onesV;
t615 = v(2, :) .* onesV;
t614 = v(1, :) .* onesV;
t613 = q(4, :) .* onesV;
t612 = q(3, :) .* onesV;
t611 = q(2, :) .* onesV;
t610 = q(1, :) .* onesV;
t609 = d .* t623;
t608 = kQ .* t622;
t607 = (t594 - t595) .* t620;
t606 = (t595 - t596) .* t622;
t605 = t589 .* t609;
t604 = t590 .* t609;
t587 = -2 .* t624;
t586 = 2 .* t624;
t585 = 4 .* t624;
t584 = 2 ./ m .* t623;
t583 = -2 .* t610;
t582 = 2 .* t610;
t581 = -4 .* t611;
t580 = -2 .* t611;
t579 = 2 .* t611;
t578 = -4 .* t612;
t577 = -2 .* t612;
t576 = 2 .* t612;
t575 = -4 .* t613;
t574 = -2 .* t613;
t573 = 2 .* t613;
t572 = -4 .* t614;
t571 = -2 .* t614;
t570 = 2 .* t614;
t569 = -4 .* t615;
t568 = -2 .* t615;
t567 = 2 .* t615;
t566 = -4 .* t616;
t565 = -2 .* t616;
t564 = 2 .* t616;
t563 = IM .* t620;
t562 = IM .* t621;
t561 = -t610 ./ 0.2e1;
t560 = t610 ./ 0.2e1;
t559 = -t611 ./ 0.2e1;
t558 = t611 ./ 0.2e1;
t557 = -t612 ./ 0.2e1;
t556 = t612 ./ 0.2e1;
t555 = -t613 ./ 0.2e1;
t554 = t613 ./ 0.2e1;
t551 = -t617 ./ 0.2e1;
t550 = t617 ./ 0.2e1;
t549 = -t618 ./ 0.2e1;
t548 = t618 ./ 0.2e1;
t547 = -t619 ./ 0.2e1;
t546 = t619 ./ 0.2e1;
t545 = -2 .* t608;
t544 = 2 .* t608;
t543 = (-t596 + t594) .* t621;
t1 = [1 4 6 t564; 1 4 7 t568; 1 4 9 t574; 1 4 10 t576; 1 5 6 t567; 1 5 7 t564; 1 5 9 t576; 1 5 10 t573; 1 6 4 t564; 1 6 5 t567; 1 6 6 t572; 1 6 8 t578; 1 6 9 t579; 1 6 10 t582; 1 7 4 t568; 1 7 5 t564; 1 7 7 t572; 1 7 8 t575; 1 7 9 t583; 1 7 10 t579; 1 8 6 t578; 1 8 7 t575; 1 9 4 t574; 1 9 5 t576; 1 9 6 t579; 1 9 7 t583; 1 10 4 t576; 1 10 5 t573; 1 10 6 t582; 1 10 7 t579; 2 4 5 t565; 2 4 7 t570; 2 4 8 t573; 2 4 10 t580; 2 5 4 t565; 2 5 5 t569; 2 5 6 t570; 2 5 8 t576; 2 5 9 t581; 2 5 10 t583; 2 6 5 t570; 2 6 7 t564; 2 6 8 t579; 2 6 10 t573; 2 7 4 t570; 2 7 6 t564; 2 7 7 t569; 2 7 8 t582; 2 7 9 t575; 2 7 10 t576; 2 8 4 t573; 2 8 5 t576; 2 8 6 t579; 2 8 7 t582; 2 9 5 t581; 2 9 7 t575; 2 10 4 t580; 2 10 5 t583; 2 10 6 t573; 2 10 7 t576; 3 4 5 t567; 3 4 6 t571; 3 4 8 t577; 3 4 9 t579; 3 5 4 t567; 3 5 5 t566; 3 5 7 t570; 3 5 8 t573; 3 5 9 t582; 3 5 10 t581; 3 6 4 t571; 3 6 6 t566; 3 6 7 t567; 3 6 8 t583; 3 6 9 t573; 3 6 10 t578; 3 7 5 t570; 3 7 6 t567; 3 7 8 t579; 3 7 9 t576; 3 8 4 t577; 3 8 5 t573; 3 8 6 t583; 3 8 7 t579; 3 9 4 t579; 3 9 5 t582; 3 9 6 t573; 3 9 7 t576; 3 10 5 t581; 3 10 6 t578; 4 4 5 t551; 4 4 6 t549; 4 4 7 t547; 4 4 11 t559; 4 4 12 t557; 4 4 13 t555; 4 5 4 t551; 4 5 11 t561; 4 6 4 t549; 4 6 12 t561; 4 7 4 t547; 4 7 13 t561; 4 11 4 t559; 4 11 5 t561; 4 12 4 t557; 4 12 6 t561; 4 13 4 t555; 4 13 7 t561; 5 4 5 t550; 5 4 11 t558; 5 5 4 t550; 5 5 6 t546; 5 5 7 t549; 5 5 11 t560; 5 5 12 t555; 5 5 13 t556; 5 6 5 t546; 5 6 13 t558; 5 7 5 t549; 5 7 12 t559; 5 11 4 t558; 5 11 5 t560; 5 12 5 t555; 5 12 7 t559; 5 13 5 t556; 5 13 6 t558; 6 4 6 t548; 6 4 12 t556; 6 5 6 t547; 6 5 13 t557; 6 6 4 t548; 6 6 5 t547; 6 6 7 t550; 6 6 11 t554; 6 6 12 t560; 6 6 13 t559; 6 7 6 t550; 6 7 11 t556; 6 11 6 t554; 6 11 7 t556; 6 12 4 t556; 6 12 6 t560; 6 13 5 t557; 6 13 6 t559; 7 4 7 t546; 7 4 13 t554; 7 5 7 t548; 7 5 12 t554; 7 6 7 t551; 7 6 11 t555; 7 7 4 t546; 7 7 5 t548; 7 7 6 t551; 7 7 11 t557; 7 7 12 t558; 7 7 13 t560; 7 11 6 t555; 7 11 7 t557; 7 12 5 t554; 7 12 7 t558; 7 13 4 t554; 7 13 7 t560; 8 4 6 t586; 8 5 7 t587; 8 6 4 t586; 8 7 5 t587; 8 9 13 onesV; 8 10 12 -onesV; 8 12 10 -onesV; 8 13 9 onesV; 9 4 5 t587; 9 5 4 t587; 9 6 7 t587; 9 7 6 t587; 9 8 13 -onesV; 9 10 11 onesV; 9 11 10 onesV; 9 13 8 -onesV; 10 5 5 t585; 10 6 6 t585; 10 8 12 onesV; 10 9 11 -onesV; 10 11 9 -onesV; 10 12 8 onesV; 10 14 14 t584; 10 15 15 t584; 10 16 16 t584; 10 17 17 t584; 11 12 13 -t607; 11 12 14 -t563; 11 12 15 t563; 11 12 16 -t563; 11 12 17 t563; 11 13 12 -t607; 11 14 12 -t563; 11 15 12 t563; 11 15 15 2 .* t604; 11 16 12 -t563; 11 17 12 t563; 11 17 17 -2 .* t604; 12 11 13 t543; 12 11 14 t562; 12 11 15 -t562; 12 11 16 t562; 12 11 17 -t562; 12 13 11 t543; 12 14 11 t562; 12 14 14 -2 .* t605; 12 15 11 -t562; 12 16 11 t562; 12 16 16 2 .* t605; 12 17 11 -t562; 13 11 12 -t606; 13 12 11 -t606; 13 14 14 t545; 13 15 15 t544; 13 16 16 t545; 13 17 17 t544;];

                
                obj.H = t1;
                obj.isEmptyH = false;
            end
            res = obj.H;
        end
        
        function res = FTilde(obj, y, u)
            [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj, y, u);
            t733 = q(4);
t717 = t733 ^ 2;
t756 = -2 * t717;
t734 = q(3);
t718 = t734 ^ 2;
t755 = -2 * t718;
t754 = (d * kT);
t735 = q(2);
t719 = t735 ^ 2;
t753 = 1 - 2 * t719;
t752 = t734 * t733;
t751 = t735 * t733;
t750 = t735 * t734;
t736 = q(1);
t749 = t736 * t733;
t748 = t736 * t734;
t747 = t736 * t735;
t729 = u(4);
t713 = (t729 ^ 2);
t731 = u(2);
t715 = (t731 ^ 2);
t746 = (-t713 - t715);
t730 = u(3);
t714 = (t730 ^ 2);
t732 = u(1);
t716 = (t732 ^ 2);
t745 = (t714 + t716);
t744 = 2 * g;
t726 = v(3);
t743 = 2 * t726;
t727 = v(2);
t742 = 2 * t727;
t728 = v(1);
t741 = 2 * t728;
t740 = t755 + t753;
t739 = t748 - t751;
t738 = -t747 - t752;
t737 = ((t730 - t729 + t732 - t731) * IM);
t725 = Iges(1);
t724 = Iges(2);
t723 = Iges(3);
t722 = omega(1);
t721 = omega(2);
t720 = omega(3);
t1 = [(1 + t755 + t756) * t728 + (-t749 + t750) * t742 + (t748 + t751) * t743 (t749 + t750) * t741 + (t756 + t753) * t727 + (-t747 + t752) * t743 -t739 * t741 - t738 * t742 + t740 * t726 -t736 ^ 2 * (t735 * t722 + t734 * t721 + t733 * t720) / 0.2e1 t719 * (t736 * t722 - t733 * t721 + t734 * t720) / 0.2e1 t718 * (t733 * t722 + t736 * t721 - t735 * t720) / 0.2e1 -t717 * (t734 * t722 - t735 * t721 - t736 * t720) / 0.2e1 -t721 * t726 + t720 * t727 + (t739 * t744) -t720 * t728 + t722 * t726 + (t738 * t744) ((t745 - t746) * kT + (-t722 * t727 + t721 * t728 - (t740 * g)) * m) / m -((-t715 + t713) * t754 + ((t723 - t724) * t720 + t737) * t721) / t725 ((-t716 + t714) * t754 + ((-t725 + t723) * t720 + t737) * t722) / t724 -((t724 - t725) * t722 * t721 + (t745 + t746) * kQ) / t723];

            res = t1';
        end
        
        function res = JTilde(obj, y, u)
            [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj, y, u);
            t996 = d * kT;
t956 = q(3);
t995 = g * t956;
t957 = q(2);
t994 = g * t957;
t958 = q(1);
t993 = g * t958;
t942 = omega(3);
t992 = -t942 / 0.2e1;
t991 = t942 / 0.2e1;
t943 = omega(2);
t990 = -t943 / 0.2e1;
t989 = t943 / 0.2e1;
t944 = omega(1);
t988 = -t944 / 0.2e1;
t987 = t944 / 0.2e1;
t955 = q(4);
t986 = -t955 / 0.2e1;
t985 = -t956 / 0.2e1;
t984 = -t957 / 0.2e1;
t983 = t958 / 0.2e1;
t940 = t957 ^ 2;
t982 = 0.1e1 - 0.2e1 * t940;
t981 = IM * t943;
t945 = Iges(3);
t935 = 1 / t945;
t980 = kQ * t935;
t979 = -2 * t996;
t978 = 2 * t996;
t946 = Iges(2);
t936 = 0.1e1 / t946;
t977 = t936 * t944;
t947 = Iges(1);
t937 = 0.1e1 / t947;
t976 = t937 * t943;
t948 = v(3);
t975 = t948 * t957;
t974 = t948 * t958;
t949 = v(2);
t973 = t949 * t955;
t972 = t949 * t958;
t950 = v(1);
t971 = t950 * t956;
t970 = t950 * t958;
t969 = t958 * t955;
t968 = t958 * t956;
t967 = t958 * t957;
t966 = -2 * t980;
t965 = 2 * t980;
t964 = 2 * kT / m;
t963 = IM * t976;
t962 = IM * t977;
t961 = (t935 * (t946 - t947));
t951 = u(4);
t952 = u(3);
t953 = u(2);
t954 = u(1);
t960 = t945 * t942 + (t952 + t954 - t951 - t953) * IM;
t941 = t958 ^ 2;
t939 = t956 ^ 2;
t938 = t955 ^ 2;
t933 = -0.2e1 * t939;
t932 = -0.2e1 * t938;
t929 = -2 * t994;
t928 = -0.2e1 * g * t955;
t927 = IM * t944;
t926 = t957 * t956;
t925 = t957 * t955;
t924 = t956 * t955;
t923 = t950 * t957;
t922 = t950 * t955;
t921 = t949 * t957;
t920 = t949 * t956;
t919 = t948 * t956;
t918 = t948 * t955;
t1 = [1 4 -0.2e1 * t973 + 0.2e1 * t919; 1 5 0.2e1 * t920 + 0.2e1 * t918; 1 6 -0.4e1 * t971 + 0.2e1 * t921 + 0.2e1 * t974; 1 7 -0.4e1 * t922 - 0.2e1 * t972 + 0.2e1 * t975; 1 8 0.1e1 + t933 + t932; 1 9 -0.2e1 * t969 + 0.2e1 * t926; 1 10 0.2e1 * t968 + 0.2e1 * t925; 2 4 0.2e1 * t922 - 0.2e1 * t975; 2 5 0.2e1 * t971 - 0.4e1 * t921 - 0.2e1 * t974; 2 6 0.2e1 * t923 + 0.2e1 * t918; 2 7 0.2e1 * t970 - 0.4e1 * t973 + 0.2e1 * t919; 2 8 0.2e1 * t969 + 0.2e1 * t926; 2 9 t932 + t982; 2 10 -0.2e1 * t967 + 0.2e1 * t924; 3 4 -0.2e1 * t971 + 0.2e1 * t921; 3 5 0.2e1 * t922 + 0.2e1 * t972 - 0.4e1 * t975; 3 6 -0.2e1 * t970 + 0.2e1 * t973 - 0.4e1 * t919; 3 7 0.2e1 * t923 + 0.2e1 * t920; 3 8 -0.2e1 * t968 + 0.2e1 * t925; 3 9 0.2e1 * t967 + 0.2e1 * t924; 3 10 t933 + t982; 4 4 -t958 * (t957 * t944 + t956 * t943 + t955 * t942); 4 5 t941 * t988; 4 6 t941 * t990; 4 7 t941 * t992; 4 11 t941 * t984; 4 12 t941 * t985; 4 13 t941 * t986; 5 4 t940 * t987; 5 5 t957 * (t958 * t944 - t955 * t943 + t956 * t942); 5 6 t940 * t991; 5 7 t940 * t990; 5 11 t940 * t983; 5 12 t940 * t986; 5 13 t940 * t956 / 0.2e1; 6 4 t939 * t989; 6 5 t939 * t992; 6 6 t956 * (t955 * t944 + t958 * t943 - t957 * t942); 6 7 t939 * t987; 6 11 t939 * t955 / 0.2e1; 6 12 t939 * t983; 6 13 t939 * t984; 7 4 t938 * t991; 7 5 t938 * t989; 7 6 t938 * t988; 7 7 -t955 * (t956 * t944 - t957 * t943 - t958 * t942); 7 11 t938 * t985; 7 12 t938 * t957 / 0.2e1; 7 13 t938 * t983; 8 4 2 * t995; 8 5 t928; 8 6 2 * t993; 8 7 t929; 8 9 t942; 8 10 -t943; 8 12 -t948; 8 13 t949; 9 4 t929; 9 5 -2 * t993; 9 6 t928; 9 7 -2 * t995; 9 8 -t942; 9 10 t944; 9 11 t948; 9 13 -t950; 10 5 4 * t994; 10 6 4 * t995; 10 8 t943; 10 9 -t944; 10 11 -t949; 10 12 t950; 10 14 t954 * t964; 10 15 t953 * t964; 10 16 t952 * t964; 10 17 t951 * t964; 11 12 -(-t942 * t946 + t960) * t937; 11 13 -(t945 - t946) * t976; 11 14 -t963; 11 15 -(t953 * t979 - t981) * t937; 11 16 -t963; 11 17 -(t951 * t978 - t981) * t937; 12 11 (-t942 * t947 + t960) * t936; 12 13 (-t947 + t945) * t977; 12 14 (t954 * t979 + t927) * t936; 12 15 -t962; 12 16 (t952 * t978 + t927) * t936; 12 17 -t962; 13 11 -t943 * t961; 13 12 -t944 * t961; 13 14 t954 * t966; 13 15 t953 * t965; 13 16 t952 * t966; 13 17 t951 * t965;];

            res = t1;
        end
        
        function res = getJTilde(obj, y, u)
            J_ = obj.JTilde(y, u);
            res = sparse(J_(:, 1), J_(:, 2), J_(:, 3), 13, 17);
        end
        
        function res = HTilde(obj, y, u)
            [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj, y, u);
            ones = 1;
            t1320 = g * ones;
t1319 = kT * ones;
t1272 = Iges(3);
t1318 = ones / t1272;
t1273 = Iges(2);
t1264 = 1 / t1273;
t1317 = ones * t1264;
t1274 = Iges(1);
t1265 = 1 / t1274;
t1316 = ones * t1265;
t1278 = q(4);
t1315 = (t1278 ^ 2 * ones);
t1279 = q(3);
t1314 = (t1279 ^ 2 * ones);
t1280 = q(2);
t1313 = (t1280 ^ 2 * ones);
t1312 = v(3) * ones;
t1311 = v(2) * ones;
t1310 = v(1) * ones;
t1309 = t1278 * ones;
t1308 = t1279 * ones;
t1307 = t1280 * ones;
t1281 = q(1);
t1306 = t1281 * ones;
t1269 = omega(3);
t1305 = (t1278 * t1269);
t1270 = omega(2);
t1304 = (t1278 * t1270);
t1271 = omega(1);
t1303 = (t1278 * t1271);
t1302 = (t1279 * t1269);
t1301 = (t1279 * t1270);
t1300 = (t1279 * t1271);
t1299 = (t1280 * t1269);
t1298 = (t1280 * t1270);
t1297 = (t1280 * t1271);
t1296 = (t1281 * t1269);
t1295 = (t1281 * t1270);
t1294 = (t1281 * t1271);
t1293 = d * t1319;
t1292 = kQ * t1318;
t1291 = (t1272 - t1273) * t1316;
t1290 = (t1273 - t1274) * t1318;
t1289 = ones * t1303;
t1288 = ones * t1302;
t1287 = ones * t1298;
t1286 = ones * t1296;
t1285 = ones * t1295;
t1284 = ones * t1294;
t1283 = t1264 * t1293;
t1282 = t1265 * t1293;
t1262 = -2 * t1320;
t1261 = 2 * t1320;
t1260 = 4 * t1320;
t1259 = 2 / m * t1319;
t1258 = -2 * t1306;
t1257 = 2 * t1306;
t1256 = -4 * t1307;
t1255 = -2 * t1307;
t1254 = 2 * t1307;
t1253 = -4 * t1308;
t1252 = -2 * t1308;
t1251 = 2 * t1308;
t1250 = -4 * t1309;
t1249 = -2 * t1309;
t1248 = 2 * t1309;
t1247 = -4 * t1310;
t1246 = -2 * t1310;
t1245 = 2 * t1310;
t1244 = -4 * t1311;
t1243 = -2 * t1311;
t1242 = 2 * t1311;
t1241 = -4 * t1312;
t1240 = -2 * t1312;
t1239 = 2 * t1312;
t1238 = IM * t1316;
t1237 = IM * t1317;
t1236 = -t1281 ^ 2 * ones / 0.2e1;
t1235 = -t1313 / 0.2e1;
t1234 = t1313 / 0.2e1;
t1233 = -t1314 / 0.2e1;
t1232 = t1314 / 0.2e1;
t1231 = -t1315 / 0.2e1;
t1230 = t1315 / 0.2e1;
t1227 = t1280 * t1306;
t1226 = t1279 * t1306;
t1225 = t1278 * t1306;
t1224 = t1279 * t1307;
t1223 = t1278 * t1307;
t1222 = t1278 * t1308;
t1221 = -2 * t1292;
t1220 = 2 * t1292;
t1219 = ones * t1297;
t1218 = ones * t1299;
t1217 = ones * t1300;
t1216 = ones * t1301;
t1215 = ones * t1304;
t1214 = ones * t1305;
t1213 = (-t1274 + t1272) * t1317;
t1 = [1 4 6 t1239; 1 4 7 t1243; 1 4 9 t1249; 1 4 10 t1251; 1 5 6 t1242; 1 5 7 t1239; 1 5 9 t1251; 1 5 10 t1248; 1 6 4 t1239; 1 6 5 t1242; 1 6 6 t1247; 1 6 8 t1253; 1 6 9 t1254; 1 6 10 t1257; 1 7 4 t1243; 1 7 5 t1239; 1 7 7 t1247; 1 7 8 t1250; 1 7 9 t1258; 1 7 10 t1254; 1 8 6 t1253; 1 8 7 t1250; 1 9 4 t1249; 1 9 5 t1251; 1 9 6 t1254; 1 9 7 t1258; 1 10 4 t1251; 1 10 5 t1248; 1 10 6 t1257; 1 10 7 t1254; 2 4 5 t1240; 2 4 7 t1245; 2 4 8 t1248; 2 4 10 t1255; 2 5 4 t1240; 2 5 5 t1244; 2 5 6 t1245; 2 5 8 t1251; 2 5 9 t1256; 2 5 10 t1258; 2 6 5 t1245; 2 6 7 t1239; 2 6 8 t1254; 2 6 10 t1248; 2 7 4 t1245; 2 7 6 t1239; 2 7 7 t1244; 2 7 8 t1257; 2 7 9 t1250; 2 7 10 t1251; 2 8 4 t1248; 2 8 5 t1251; 2 8 6 t1254; 2 8 7 t1257; 2 9 5 t1256; 2 9 7 t1250; 2 10 4 t1255; 2 10 5 t1258; 2 10 6 t1248; 2 10 7 t1251; 3 4 5 t1242; 3 4 6 t1246; 3 4 8 t1252; 3 4 9 t1254; 3 5 4 t1242; 3 5 5 t1241; 3 5 7 t1245; 3 5 8 t1248; 3 5 9 t1257; 3 5 10 t1256; 3 6 4 t1246; 3 6 6 t1241; 3 6 7 t1242; 3 6 8 t1258; 3 6 9 t1248; 3 6 10 t1253; 3 7 5 t1245; 3 7 6 t1242; 3 7 8 t1254; 3 7 9 t1251; 3 8 4 t1252; 3 8 5 t1248; 3 8 6 t1258; 3 8 7 t1254; 3 9 4 t1254; 3 9 5 t1257; 3 9 6 t1248; 3 9 7 t1251; 3 10 5 t1256; 3 10 6 t1253; 4 4 4 (-t1297 - t1301 - t1305) * ones; 4 4 5 -t1284; 4 4 6 -t1285; 4 4 7 -t1286; 4 4 11 -t1227; 4 4 12 -t1226; 4 4 13 -t1225; 4 5 4 -t1284; 4 5 11 t1236; 4 6 4 -t1285; 4 6 12 t1236; 4 7 4 -t1286; 4 7 13 t1236; 4 11 4 -t1227; 4 11 5 t1236; 4 12 4 -t1226; 4 12 6 t1236; 4 13 4 -t1225; 4 13 7 t1236; 5 4 5 t1219; 5 4 11 t1234; 5 5 4 t1219; 5 5 5 (t1294 - t1304 + t1302) * ones; 5 5 6 t1218; 5 5 7 -t1287; 5 5 11 t1227; 5 5 12 -t1223; 5 5 13 t1224; 5 6 5 t1218; 5 6 13 t1234; 5 7 5 -t1287; 5 7 12 t1235; 5 11 4 t1234; 5 11 5 t1227; 5 12 5 -t1223; 5 12 7 t1235; 5 13 5 t1224; 5 13 6 t1234; 6 4 6 t1216; 6 4 12 t1232; 6 5 6 -t1288; 6 5 13 t1233; 6 6 4 t1216; 6 6 5 -t1288; 6 6 6 (t1303 + t1295 - t1299) * ones; 6 6 7 t1217; 6 6 11 t1222; 6 6 12 t1226; 6 6 13 -t1224; 6 7 6 t1217; 6 7 11 t1232; 6 11 6 t1222; 6 11 7 t1232; 6 12 4 t1232; 6 12 6 t1226; 6 13 5 t1233; 6 13 6 -t1224; 7 4 7 t1214; 7 4 13 t1230; 7 5 7 t1215; 7 5 12 t1230; 7 6 7 -t1289; 7 6 11 t1231; 7 7 4 t1214; 7 7 5 t1215; 7 7 6 -t1289; 7 7 7 (-t1300 + t1298 + t1296) * ones; 7 7 11 -t1222; 7 7 12 t1223; 7 7 13 t1225; 7 11 6 t1231; 7 11 7 -t1222; 7 12 5 t1230; 7 12 7 t1223; 7 13 4 t1230; 7 13 7 t1225; 8 4 6 t1261; 8 5 7 t1262; 8 6 4 t1261; 8 7 5 t1262; 8 9 13 ones; 8 10 12 -ones; 8 12 10 -ones; 8 13 9 ones; 9 4 5 t1262; 9 5 4 t1262; 9 6 7 t1262; 9 7 6 t1262; 9 8 13 -ones; 9 10 11 ones; 9 11 10 ones; 9 13 8 -ones; 10 5 5 t1260; 10 6 6 t1260; 10 8 12 ones; 10 9 11 -ones; 10 11 9 -ones; 10 12 8 ones; 10 14 14 t1259; 10 15 15 t1259; 10 16 16 t1259; 10 17 17 t1259; 11 12 13 -t1291; 11 12 14 -t1238; 11 12 15 t1238; 11 12 16 -t1238; 11 12 17 t1238; 11 13 12 -t1291; 11 14 12 -t1238; 11 15 12 t1238; 11 15 15 2 * t1282; 11 16 12 -t1238; 11 17 12 t1238; 11 17 17 -2 * t1282; 12 11 13 t1213; 12 11 14 t1237; 12 11 15 -t1237; 12 11 16 t1237; 12 11 17 -t1237; 12 13 11 t1213; 12 14 11 t1237; 12 14 14 -2 * t1283; 12 15 11 -t1237; 12 16 11 t1237; 12 16 16 2 * t1283; 12 17 11 -t1237; 13 11 12 -t1290; 13 12 11 -t1290; 13 14 14 t1221; 13 15 15 t1220; 13 16 16 t1221; 13 17 17 t1220;];

            res = t1;
        end
        
        function res = getHTilde(obj, y, u)
            
            res = cell(1, 13);
            H_ = obj.HTilde(y, u);
            for i = 1:size(H_, 1)
                if isempty(res{H_(i, 1)})
                    res{H_(i, 1)} = sparse(17, 17);
                end
                res{H_(i, 1)}(H_(i, 2), H_(i, 3)) = H_(i, 4);
            end
            
        end
        
        function [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj, varargin)
            
            if nargin == 3            
                y = varargin{1};
                u = varargin{2};
            else
                y = obj.state;
                u   = obj.contr;
            end
            q   = y(4:7    , :);
            v   = y(8:10   , :);
            omega   = y(11:13  , :);
            
            
            
            Iges = obj.robot.I;
            IM = obj.robot.I_M;
            m = obj.robot.m;
            
            kT  = obj.robot.kT;
            kQ  = obj.robot.kQ;
            d   = obj.robot.d;
            g   = obj.environment.g;
        end
        
    end
    
end