classdef(Abstract) BasisGenQDyn < Dyn
    %BASISGENQDYN wird von MAPLE/PYTHON generiert und enthaelt die
    %Berechnung der Ableitungen
    
    properties
        F;
        J;
        H;
        
    end
    
    properties(GetAccess=private, SetAccess = protected)
        isEmptyF;
        isEmptyJ;
        isEmptyH;
    end
    
    methods
        function cBGQD = BasisGenQDyn()
            cBGQD@Dyn();
            cBGQD.emptyResults();
        end
        
        function emptyResults(obj)
            
            obj.F   = [];
            obj.J  = [];
            obj.H = [];
            
            obj.isEmptyF = true;
            obj.isEmptyJ = true;
            obj.isEmptyH = true;
        end
        
        function res = get.F(obj)
            if obj.isEmptyF
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                t117 = q(4, :);
t144 = -2 .* t117 .^ 2;
t118 = q(3, :);
t143 = -2 .* t118 .^ 2;
t142 = (d .* kT);
t141 = -t117 ./ 0.2e1;
t140 = -t118 ./ 0.2e1;
t119 = q(2, :);
t139 = -t119 ./ 0.2e1;
t120 = q(1, :);
t138 = t120 ./ 0.2e1;
t137 = 0.1e1 - 0.2e1 .* t119 .^ 2;
t113 = u(4, :);
t97 = (t113 .^ 2);
t115 = u(2, :);
t99 = (t115 .^ 2);
t136 = (-t97 - t99);
t116 = u(1, :);
t100 = (t116 .^ 2);
t114 = u(3, :);
t98 = (t114 .^ 2);
t135 = (t100 + t98);
t134 = t118 .* t117;
t133 = t119 .* t117;
t132 = t119 .* t118;
t131 = t120 .* t117;
t130 = t120 .* t118;
t129 = t120 .* t119;
t128 = 2 .* g;
t110 = v(3, :);
t127 = 2 .* t110;
t111 = v(2, :);
t126 = 2 .* t111;
t112 = v(1, :);
t125 = 2 .* t112;
t124 = t143 + t137;
t123 = t130 - t133;
t122 = -t129 - t134;
t121 = ((t114 - t113 + t116 - t115) .* IM);
t109 = Iges(1);
t108 = Iges(2);
t107 = Iges(3);
t106 = omega(1, :);
t105 = omega(2, :);
t104 = omega(3, :);
t1 = [((1 + t143 + t144) .* t112) + (-t131 + t132) .* t126 + (t130 + t133) .* t127; (t131 + t132) .* t125 + (t144 + t137) .* t111 + (-t129 + t134) .* t127; -t123 .* t125 - t122 .* t126 + t124 .* t110; t106 .* t139 + t105 .* t140 + t104 .* t141; t106 .* t138 + t105 .* t141 + t118 .* t104 ./ 0.2e1; t117 .* t106 ./ 0.2e1 + t105 .* t138 + t104 .* t139; t106 .* t140 + t119 .* t105 ./ 0.2e1 + t104 .* t138; -t105 .* t110 + t104 .* t111 + t123 .* t128; -t104 .* t112 + t106 .* t110 + t122 .* t128; ((t135 - t136) .* kT + (-t106 .* t111 + t105 .* t112 - t124 .* g) .* m) ./ m; -((-t99 + t97) .* t142 + ((t107 - t108) .* t104 + t121) .* t105) ./ t109; ((-t100 + t98) .* t142 + ((-t109 + t107) .* t104 + t121) .* t106) ./ t108; -((t108 - t109) .* t106 .* t105 + (t135 + t136) .* kQ) ./ t107;];

                
                obj.F = t1;
                obj.isEmptyF = false;
            end
            res = obj.F;
        end
        
        function res = get.J(obj)
            if obj.isEmptyJ
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                t372 = d .* kT;
t342 = q(3, :);
t371 = g .* t342;
t343 = q(2, :);
t370 = g .* t343;
t344 = q(1, :);
t369 = g .* t344;
t368 = 1 - 2 .* t343 .^ 2;
t329 = omega(2, :);
t367 = IM .* t329;
t331 = Iges(3);
t325 = 1 ./ t331;
t366 = kQ .* t325;
t365 = -2 .* t372;
t364 = 2 .* t372;
t332 = Iges(2);
t326 = 0.1e1 ./ t332;
t330 = omega(1, :);
t363 = (t326 .* t330);
t333 = Iges(1);
t327 = 0.1e1 ./ t333;
t362 = (t327 .* t329);
t334 = v(3, :);
t361 = t334 .* t343;
t360 = t334 .* t344;
t335 = v(2, :);
t341 = q(4, :);
t359 = t335 .* t341;
t358 = t335 .* t344;
t336 = v(1, :);
t357 = t336 .* t342;
t356 = t336 .* t344;
t355 = t344 .* t341;
t354 = t344 .* t342;
t353 = t344 .* t343;
t352 = -2 .* t366;
t351 = 2 .* t366;
t350 = 2 .* kT ./ m;
t349 = IM .* t362;
t348 = IM .* t363;
t347 = (t325 .* (t332 - t333));
t328 = omega(3, :);
t337 = u(4, :);
t338 = u(3, :);
t339 = u(2, :);
t340 = u(1, :);
t346 = (t331 .* t328 + (t338 + t340 - t337 - t339) .* IM);
t324 = t344 ./ 0.2e1;
t323 = -t343 ./ 0.2e1;
t322 = -t342 ./ 0.2e1;
t321 = -t341 ./ 0.2e1;
t319 = -2 .* t342 .^ 2;
t318 = -2 .* t341 .^ 2;
t315 = -t330 ./ 0.2e1;
t314 = t330 ./ 0.2e1;
t313 = -t329 ./ 0.2e1;
t312 = t329 ./ 0.2e1;
t311 = -t328 ./ 0.2e1;
t310 = t328 ./ 0.2e1;
t309 = -2 .* t370;
t308 = -2 .* g .* t341;
t307 = IM .* t330;
t306 = t343 .* t342;
t305 = t343 .* t341;
t304 = t342 .* t341;
t303 = t336 .* t343;
t302 = t336 .* t341;
t301 = t335 .* t343;
t300 = t335 .* t342;
t299 = t334 .* t342;
t298 = t334 .* t341;
t1 = [1 4 -2 .* t359 + 2 .* t299; 1 5 2 .* t300 + 2 .* t298; 1 6 -4 .* t357 + 2 .* t301 + 2 .* t360; 1 7 -4 .* t302 - 2 .* t358 + 2 .* t361; 1 8 1 + t319 + t318; 1 9 -2 .* t355 + 2 .* t306; 1 10 2 .* t354 + 2 .* t305; 2 4 2 .* t302 - 2 .* t361; 2 5 2 .* t357 - 4 .* t301 - 2 .* t360; 2 6 2 .* t303 + 2 .* t298; 2 7 2 .* t356 - 4 .* t359 + 2 .* t299; 2 8 2 .* t355 + 2 .* t306; 2 9 t318 + t368; 2 10 -2 .* t353 + 2 .* t304; 3 4 -2 .* t357 + 2 .* t301; 3 5 2 .* t302 + 2 .* t358 - 4 .* t361; 3 6 -2 .* t356 + 2 .* t359 - 4 .* t299; 3 7 2 .* t303 + 2 .* t300; 3 8 -2 .* t354 + 2 .* t305; 3 9 2 .* t353 + 2 .* t304; 3 10 t319 + t368; 4 5 t315; 4 6 t313; 4 7 t311; 4 11 t323; 4 12 t322; 4 13 t321; 5 4 t314; 5 6 t310; 5 7 t313; 5 11 t324; 5 12 t321; 5 13 t342 ./ 0.2e1; 6 4 t312; 6 5 t311; 6 7 t314; 6 11 t341 ./ 0.2e1; 6 12 t324; 6 13 t323; 7 4 t310; 7 5 t312; 7 6 t315; 7 11 t322; 7 12 t343 ./ 0.2e1; 7 13 t324; 8 4 2 .* t371; 8 5 t308; 8 6 2 .* t369; 8 7 t309; 8 9 t328; 8 10 -t329; 8 12 -t334; 8 13 t335; 9 4 t309; 9 5 -2 .* t369; 9 6 t308; 9 7 -2 .* t371; 9 8 -t328; 9 10 t330; 9 11 t334; 9 13 -t336; 10 5 4 .* t370; 10 6 4 .* t371; 10 8 t329; 10 9 -t330; 10 11 -t335; 10 12 t336; 10 14 t340 .* t350; 10 15 t339 .* t350; 10 16 t338 .* t350; 10 17 t337 .* t350; 11 12 -(-t328 .* t332 + t346) .* t327; 11 13 -(t331 - t332) .* t362; 11 14 -t349; 11 15 -(t339 .* t365 - t367) .* t327; 11 16 -t349; 11 17 -(t337 .* t364 - t367) .* t327; 12 11 (-t328 .* t333 + t346) .* t326; 12 13 (-t333 + t331) .* t363; 12 14 ((t340 .* t365) + t307) .* t326; 12 15 -t348; 12 16 ((t338 .* t364) + t307) .* t326; 12 17 -t348; 13 11 -t329 .* t347; 13 12 -t330 .* t347; 13 14 t340 .* t352; 13 15 t339 .* t351; 13 16 t338 .* t352; 13 17 t337 .* t351;];

                
                obj.J = t1;
                obj.isEmptyJ = false;
            end
            res = obj.J;
        end
        
        function res = get.H(obj)
            if obj.isEmptyH
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                onesV = ones(1, obj.environment.n_timepoints); %Korregiere die Matrix Dimension
                
                t564 = g .* onesV;
t563 = kT .* onesV;
t537 = Iges(3);
t562 = onesV ./ t537;
t538 = Iges(2);
t533 = 1 ./ t538;
t561 = onesV .* t533;
t539 = Iges(1);
t534 = 1 ./ t539;
t560 = onesV .* t534;
t559 = v(3, :) .* onesV;
t558 = v(2, :) .* onesV;
t557 = v(1, :) .* onesV;
t556 = q(4, :) .* onesV;
t555 = q(3, :) .* onesV;
t554 = q(2, :) .* onesV;
t553 = q(1, :) .* onesV;
t552 = d .* t563;
t551 = kQ .* t562;
t550 = (t537 - t538) .* t560;
t549 = (t538 - t539) .* t562;
t548 = t533 .* t552;
t547 = t534 .* t552;
t536 = -onesV ./ 0.2e1;
t535 = onesV ./ 0.2e1;
t531 = -2 .* t564;
t530 = 2 .* t564;
t529 = 4 .* t564;
t528 = 2 ./ m .* t563;
t527 = -2 .* t553;
t526 = 2 .* t553;
t525 = -4 .* t554;
t524 = -2 .* t554;
t523 = 2 .* t554;
t522 = -4 .* t555;
t521 = -2 .* t555;
t520 = 2 .* t555;
t519 = -4 .* t556;
t518 = -2 .* t556;
t517 = 2 .* t556;
t516 = -4 .* t557;
t515 = -2 .* t557;
t514 = 2 .* t557;
t513 = -4 .* t558;
t512 = -2 .* t558;
t511 = 2 .* t558;
t510 = -4 .* t559;
t509 = -2 .* t559;
t508 = 2 .* t559;
t507 = IM .* t560;
t506 = IM .* t561;
t503 = -2 .* t551;
t502 = 2 .* t551;
t501 = (-t539 + t537) .* t561;
t1 = [1 4 6 t508; 1 4 7 t512; 1 4 9 t518; 1 4 10 t520; 1 5 6 t511; 1 5 7 t508; 1 5 9 t520; 1 5 10 t517; 1 6 4 t508; 1 6 5 t511; 1 6 6 t516; 1 6 8 t522; 1 6 9 t523; 1 6 10 t526; 1 7 4 t512; 1 7 5 t508; 1 7 7 t516; 1 7 8 t519; 1 7 9 t527; 1 7 10 t523; 1 8 6 t522; 1 8 7 t519; 1 9 4 t518; 1 9 5 t520; 1 9 6 t523; 1 9 7 t527; 1 10 4 t520; 1 10 5 t517; 1 10 6 t526; 1 10 7 t523; 2 4 5 t509; 2 4 7 t514; 2 4 8 t517; 2 4 10 t524; 2 5 4 t509; 2 5 5 t513; 2 5 6 t514; 2 5 8 t520; 2 5 9 t525; 2 5 10 t527; 2 6 5 t514; 2 6 7 t508; 2 6 8 t523; 2 6 10 t517; 2 7 4 t514; 2 7 6 t508; 2 7 7 t513; 2 7 8 t526; 2 7 9 t519; 2 7 10 t520; 2 8 4 t517; 2 8 5 t520; 2 8 6 t523; 2 8 7 t526; 2 9 5 t525; 2 9 7 t519; 2 10 4 t524; 2 10 5 t527; 2 10 6 t517; 2 10 7 t520; 3 4 5 t511; 3 4 6 t515; 3 4 8 t521; 3 4 9 t523; 3 5 4 t511; 3 5 5 t510; 3 5 7 t514; 3 5 8 t517; 3 5 9 t526; 3 5 10 t525; 3 6 4 t515; 3 6 6 t510; 3 6 7 t511; 3 6 8 t527; 3 6 9 t517; 3 6 10 t522; 3 7 5 t514; 3 7 6 t511; 3 7 8 t523; 3 7 9 t520; 3 8 4 t521; 3 8 5 t517; 3 8 6 t527; 3 8 7 t523; 3 9 4 t523; 3 9 5 t526; 3 9 6 t517; 3 9 7 t520; 3 10 5 t525; 3 10 6 t522; 4 5 11 t536; 4 6 12 t536; 4 7 13 t536; 4 11 5 t536; 4 12 6 t536; 4 13 7 t536; 5 4 11 t535; 5 6 13 t535; 5 7 12 t536; 5 11 4 t535; 5 12 7 t536; 5 13 6 t535; 6 4 12 t535; 6 5 13 t536; 6 7 11 t535; 6 11 7 t535; 6 12 4 t535; 6 13 5 t536; 7 4 13 t535; 7 5 12 t535; 7 6 11 t536; 7 11 6 t536; 7 12 5 t535; 7 13 4 t535; 8 4 6 t530; 8 5 7 t531; 8 6 4 t530; 8 7 5 t531; 8 9 13 onesV; 8 10 12 -onesV; 8 12 10 -onesV; 8 13 9 onesV; 9 4 5 t531; 9 5 4 t531; 9 6 7 t531; 9 7 6 t531; 9 8 13 -onesV; 9 10 11 onesV; 9 11 10 onesV; 9 13 8 -onesV; 10 5 5 t529; 10 6 6 t529; 10 8 12 onesV; 10 9 11 -onesV; 10 11 9 -onesV; 10 12 8 onesV; 10 14 14 t528; 10 15 15 t528; 10 16 16 t528; 10 17 17 t528; 11 12 13 -t550; 11 12 14 -t507; 11 12 15 t507; 11 12 16 -t507; 11 12 17 t507; 11 13 12 -t550; 11 14 12 -t507; 11 15 12 t507; 11 15 15 2 .* t547; 11 16 12 -t507; 11 17 12 t507; 11 17 17 -2 .* t547; 12 11 13 t501; 12 11 14 t506; 12 11 15 -t506; 12 11 16 t506; 12 11 17 -t506; 12 13 11 t501; 12 14 11 t506; 12 14 14 -2 .* t548; 12 15 11 -t506; 12 16 11 t506; 12 16 16 2 .* t548; 12 17 11 -t506; 13 11 12 -t549; 13 12 11 -t549; 13 14 14 t503; 13 15 15 t502; 13 16 16 t503; 13 17 17 t502;];

                
                obj.H = t1;
                obj.isEmptyH = false;
            end
            res = obj.H;
        end
        
        function res = FTilde(obj, y, u)
            [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj, y, u);
            t681 = q(4);
t708 = -2 * t681 ^ 2;
t682 = q(3);
t707 = -2 * t682 ^ 2;
t706 = (d * kT);
t705 = -t681 / 0.2e1;
t704 = -t682 / 0.2e1;
t683 = q(2);
t703 = -t683 / 0.2e1;
t684 = q(1);
t702 = t684 / 0.2e1;
t701 = 0.1e1 - 0.2e1 * t683 ^ 2;
t700 = t682 * t681;
t699 = t683 * t681;
t698 = t683 * t682;
t697 = t684 * t681;
t696 = t684 * t682;
t695 = t684 * t683;
t677 = u(4);
t661 = (t677 ^ 2);
t679 = u(2);
t663 = (t679 ^ 2);
t694 = (-t661 - t663);
t678 = u(3);
t662 = (t678 ^ 2);
t680 = u(1);
t664 = (t680 ^ 2);
t693 = (t662 + t664);
t692 = 2 * g;
t674 = v(3);
t691 = 2 * t674;
t675 = v(2);
t690 = 2 * t675;
t676 = v(1);
t689 = 2 * t676;
t688 = t707 + t701;
t687 = t696 - t699;
t686 = -t695 - t700;
t685 = ((t678 - t677 + t680 - t679) * IM);
t673 = Iges(1);
t672 = Iges(2);
t671 = Iges(3);
t670 = omega(1);
t669 = omega(2);
t668 = omega(3);
t1 = [((1 + t707 + t708) * t676) + (-t697 + t698) * t690 + (t696 + t699) * t691; (t697 + t698) * t689 + (t708 + t701) * t675 + (-t695 + t700) * t691; -t687 * t689 - t686 * t690 + t688 * t674; (t670 * t703 + t669 * t704 + t668 * t705) * t684; (t670 * t702 + t669 * t705 + t682 * t668 / 0.2e1) * t683; (t681 * t670 / 0.2e1 + t669 * t702 + t668 * t703) * t682; (t668 * t702 + t683 * t669 / 0.2e1 + t670 * t704) * t681; -t669 * t674 + t668 * t675 + t687 * t692; -t668 * t676 + t670 * t674 + t686 * t692; ((t693 - t694) * kT + (-t670 * t675 + t669 * t676 - t688 * g) * m) / m; -((-t663 + t661) * t706 + ((t671 - t672) * t668 + t685) * t669) / t673; ((-t664 + t662) * t706 + ((-t673 + t671) * t668 + t685) * t670) / t672; -((t672 - t673) * t670 * t669 + (t693 + t694) * kQ) / t671;];

            res = t1;
        end
        
        function res = JTilde(obj, y, u)
            [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj, y, u);
            t942 = d * kT;
t900 = q(3);
t941 = g * t900;
t901 = q(2);
t940 = g * t901;
t902 = q(1);
t939 = g * t902;
t938 = 1 - 2 * t901 ^ 2;
t887 = omega(2);
t937 = IM * t887;
t889 = Iges(3);
t883 = 1 / t889;
t936 = kQ * t883;
t935 = -2 * t942;
t934 = 2 * t942;
t890 = Iges(2);
t884 = 1 / t890;
t888 = omega(1);
t933 = t884 * t888;
t891 = Iges(1);
t885 = 1 / t891;
t932 = t885 * t887;
t892 = v(3);
t931 = t892 * t901;
t930 = t892 * t902;
t893 = v(2);
t899 = q(4);
t929 = t893 * t899;
t928 = t893 * t902;
t894 = v(1);
t927 = t894 * t900;
t926 = t894 * t902;
t886 = omega(3);
t925 = (t899 * t886);
t924 = (t899 * t887);
t923 = (t899 * t888);
t922 = (t900 * t886);
t921 = (t900 * t887);
t920 = (t900 * t888);
t919 = t901 * t886;
t918 = t901 * t887;
t917 = t901 * t888;
t916 = t902 * t886;
t915 = t902 * t887;
t914 = t902 * t888;
t913 = t902 * t899;
t912 = t902 * t900;
t911 = t902 * t901;
t910 = -2 * t936;
t909 = 2 * t936;
t908 = 2 * kT / m;
t907 = IM * t932;
t906 = IM * t933;
t905 = t883 * (t890 - t891);
t895 = u(4);
t896 = u(3);
t897 = u(2);
t898 = u(1);
t904 = t889 * t886 + (t896 + t898 - t895 - t897) * IM;
t881 = -2 * t900 ^ 2;
t880 = -2 * t899 ^ 2;
t877 = -2 * t940;
t876 = -2 * g * t899;
t875 = IM * t888;
t874 = t901 * t900;
t873 = t901 * t899;
t872 = t900 * t899;
t871 = t894 * t901;
t870 = t894 * t899;
t869 = t893 * t901;
t868 = t893 * t900;
t867 = t892 * t900;
t866 = t892 * t899;
t1 = [1 4 -2 * t929 + 2 * t867; 1 5 2 * t868 + 2 * t866; 1 6 -4 * t927 + 2 * t869 + 2 * t930; 1 7 -4 * t870 - 2 * t928 + 2 * t931; 1 8 1 + t881 + t880; 1 9 -2 * t913 + 2 * t874; 1 10 2 * t912 + 2 * t873; 2 4 2 * t870 - 2 * t931; 2 5 2 * t927 - 4 * t869 - 2 * t930; 2 6 2 * t871 + 2 * t866; 2 7 2 * t926 - 4 * t929 + 2 * t867; 2 8 2 * t913 + 2 * t874; 2 9 t880 + t938; 2 10 -2 * t911 + 2 * t872; 3 4 -2 * t927 + 2 * t869; 3 5 2 * t870 + 2 * t928 - 4 * t931; 3 6 -2 * t926 + 2 * t929 - 4 * t867; 3 7 2 * t871 + 2 * t868; 3 8 -2 * t912 + 2 * t873; 3 9 2 * t911 + 2 * t872; 3 10 t881 + t938; 4 4 -t917 / 0.2e1 - t921 / 0.2e1 - t925 / 0.2e1; 4 5 -t914 / 0.2e1; 4 6 -t915 / 0.2e1; 4 7 -t916 / 0.2e1; 4 11 -t911 / 0.2e1; 4 12 -t912 / 0.2e1; 4 13 -t913 / 0.2e1; 5 4 t917 / 0.2e1; 5 5 t914 / 0.2e1 - t924 / 0.2e1 + t922 / 0.2e1; 5 6 t919 / 0.2e1; 5 7 -t918 / 0.2e1; 5 11 t911 / 0.2e1; 5 12 -t873 / 0.2e1; 5 13 t874 / 0.2e1; 6 4 t921 / 0.2e1; 6 5 -t922 / 0.2e1; 6 6 t923 / 0.2e1 + t915 / 0.2e1 - t919 / 0.2e1; 6 7 t920 / 0.2e1; 6 11 t872 / 0.2e1; 6 12 t912 / 0.2e1; 6 13 -t874 / 0.2e1; 7 4 t925 / 0.2e1; 7 5 t924 / 0.2e1; 7 6 -t923 / 0.2e1; 7 7 -t920 / 0.2e1 + t918 / 0.2e1 + t916 / 0.2e1; 7 11 -t872 / 0.2e1; 7 12 t873 / 0.2e1; 7 13 t913 / 0.2e1; 8 4 2 * t941; 8 5 t876; 8 6 2 * t939; 8 7 t877; 8 9 t886; 8 10 -t887; 8 12 -t892; 8 13 t893; 9 4 t877; 9 5 -2 * t939; 9 6 t876; 9 7 -2 * t941; 9 8 -t886; 9 10 t888; 9 11 t892; 9 13 -t894; 10 5 4 * t940; 10 6 4 * t941; 10 8 t887; 10 9 -t888; 10 11 -t893; 10 12 t894; 10 14 t898 * t908; 10 15 t897 * t908; 10 16 t896 * t908; 10 17 t895 * t908; 11 12 -(-t886 * t890 + t904) * t885; 11 13 -(t889 - t890) * t932; 11 14 -t907; 11 15 -(t897 * t935 - t937) * t885; 11 16 -t907; 11 17 -(t895 * t934 - t937) * t885; 12 11 (-t886 * t891 + t904) * t884; 12 13 (-t891 + t889) * t933; 12 14 (t898 * t935 + t875) * t884; 12 15 -t906; 12 16 (t896 * t934 + t875) * t884; 12 17 -t906; 13 11 -t887 * t905; 13 12 -t888 * t905; 13 14 t898 * t910; 13 15 t897 * t909; 13 16 t896 * t910; 13 17 t895 * t909;];

            res = t1;
        end
        
        function res = getJTilde(obj, y, u)
            J_ = obj.JTilde(y, u);
            res = sparse(J_(:, 1), J_(:, 2), J_(:, 3), 13, 17);
        end
        
        function res = HTilde(obj, y, u)
            [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj, y, u);
            ones = 1;
            t1188 = g * ones;
t1187 = kT * ones;
t1158 = Iges(3);
t1186 = ones / t1158;
t1159 = Iges(2);
t1153 = 1 / t1159;
t1185 = ones * t1153;
t1160 = Iges(1);
t1154 = 1 / t1160;
t1184 = ones * t1154;
t1183 = (omega(3) * ones);
t1182 = (omega(2) * ones);
t1181 = (omega(1) * ones);
t1180 = v(3) * ones;
t1179 = v(2) * ones;
t1178 = v(1) * ones;
t1177 = q(4) * ones;
t1176 = q(3) * ones;
t1175 = q(2) * ones;
t1174 = q(1) * ones;
t1173 = d * t1187;
t1172 = kQ * t1186;
t1171 = (t1158 - t1159) * t1184;
t1170 = (t1159 - t1160) * t1186;
t1169 = t1153 * t1173;
t1168 = t1154 * t1173;
t1151 = -2 * t1188;
t1150 = 2 * t1188;
t1149 = 4 * t1188;
t1148 = 2 / m * t1187;
t1147 = -2 * t1174;
t1146 = 2 * t1174;
t1145 = -4 * t1175;
t1144 = -2 * t1175;
t1143 = 2 * t1175;
t1142 = -4 * t1176;
t1141 = -2 * t1176;
t1140 = 2 * t1176;
t1139 = -4 * t1177;
t1138 = -2 * t1177;
t1137 = 2 * t1177;
t1136 = -4 * t1178;
t1135 = -2 * t1178;
t1134 = 2 * t1178;
t1133 = -4 * t1179;
t1132 = -2 * t1179;
t1131 = 2 * t1179;
t1130 = -4 * t1180;
t1129 = -2 * t1180;
t1128 = 2 * t1180;
t1127 = IM * t1184;
t1126 = IM * t1185;
t1125 = -t1174 / 0.2e1;
t1124 = t1174 / 0.2e1;
t1123 = -t1175 / 0.2e1;
t1122 = t1175 / 0.2e1;
t1121 = -t1176 / 0.2e1;
t1120 = t1176 / 0.2e1;
t1119 = -t1177 / 0.2e1;
t1118 = t1177 / 0.2e1;
t1115 = -t1181 / 0.2e1;
t1114 = t1181 / 0.2e1;
t1113 = -t1182 / 0.2e1;
t1112 = t1182 / 0.2e1;
t1111 = -t1183 / 0.2e1;
t1110 = t1183 / 0.2e1;
t1109 = -2 * t1172;
t1108 = 2 * t1172;
t1107 = (-t1160 + t1158) * t1185;
t1 = [1 4 6 t1128; 1 4 7 t1132; 1 4 9 t1138; 1 4 10 t1140; 1 5 6 t1131; 1 5 7 t1128; 1 5 9 t1140; 1 5 10 t1137; 1 6 4 t1128; 1 6 5 t1131; 1 6 6 t1136; 1 6 8 t1142; 1 6 9 t1143; 1 6 10 t1146; 1 7 4 t1132; 1 7 5 t1128; 1 7 7 t1136; 1 7 8 t1139; 1 7 9 t1147; 1 7 10 t1143; 1 8 6 t1142; 1 8 7 t1139; 1 9 4 t1138; 1 9 5 t1140; 1 9 6 t1143; 1 9 7 t1147; 1 10 4 t1140; 1 10 5 t1137; 1 10 6 t1146; 1 10 7 t1143; 2 4 5 t1129; 2 4 7 t1134; 2 4 8 t1137; 2 4 10 t1144; 2 5 4 t1129; 2 5 5 t1133; 2 5 6 t1134; 2 5 8 t1140; 2 5 9 t1145; 2 5 10 t1147; 2 6 5 t1134; 2 6 7 t1128; 2 6 8 t1143; 2 6 10 t1137; 2 7 4 t1134; 2 7 6 t1128; 2 7 7 t1133; 2 7 8 t1146; 2 7 9 t1139; 2 7 10 t1140; 2 8 4 t1137; 2 8 5 t1140; 2 8 6 t1143; 2 8 7 t1146; 2 9 5 t1145; 2 9 7 t1139; 2 10 4 t1144; 2 10 5 t1147; 2 10 6 t1137; 2 10 7 t1140; 3 4 5 t1131; 3 4 6 t1135; 3 4 8 t1141; 3 4 9 t1143; 3 5 4 t1131; 3 5 5 t1130; 3 5 7 t1134; 3 5 8 t1137; 3 5 9 t1146; 3 5 10 t1145; 3 6 4 t1135; 3 6 6 t1130; 3 6 7 t1131; 3 6 8 t1147; 3 6 9 t1137; 3 6 10 t1142; 3 7 5 t1134; 3 7 6 t1131; 3 7 8 t1143; 3 7 9 t1140; 3 8 4 t1141; 3 8 5 t1137; 3 8 6 t1147; 3 8 7 t1143; 3 9 4 t1143; 3 9 5 t1146; 3 9 6 t1137; 3 9 7 t1140; 3 10 5 t1145; 3 10 6 t1142; 4 4 5 t1115; 4 4 6 t1113; 4 4 7 t1111; 4 4 11 t1123; 4 4 12 t1121; 4 4 13 t1119; 4 5 4 t1115; 4 5 11 t1125; 4 6 4 t1113; 4 6 12 t1125; 4 7 4 t1111; 4 7 13 t1125; 4 11 4 t1123; 4 11 5 t1125; 4 12 4 t1121; 4 12 6 t1125; 4 13 4 t1119; 4 13 7 t1125; 5 4 5 t1114; 5 4 11 t1122; 5 5 4 t1114; 5 5 6 t1110; 5 5 7 t1113; 5 5 11 t1124; 5 5 12 t1119; 5 5 13 t1120; 5 6 5 t1110; 5 6 13 t1122; 5 7 5 t1113; 5 7 12 t1123; 5 11 4 t1122; 5 11 5 t1124; 5 12 5 t1119; 5 12 7 t1123; 5 13 5 t1120; 5 13 6 t1122; 6 4 6 t1112; 6 4 12 t1120; 6 5 6 t1111; 6 5 13 t1121; 6 6 4 t1112; 6 6 5 t1111; 6 6 7 t1114; 6 6 11 t1118; 6 6 12 t1124; 6 6 13 t1123; 6 7 6 t1114; 6 7 11 t1120; 6 11 6 t1118; 6 11 7 t1120; 6 12 4 t1120; 6 12 6 t1124; 6 13 5 t1121; 6 13 6 t1123; 7 4 7 t1110; 7 4 13 t1118; 7 5 7 t1112; 7 5 12 t1118; 7 6 7 t1115; 7 6 11 t1119; 7 7 4 t1110; 7 7 5 t1112; 7 7 6 t1115; 7 7 11 t1121; 7 7 12 t1122; 7 7 13 t1124; 7 11 6 t1119; 7 11 7 t1121; 7 12 5 t1118; 7 12 7 t1122; 7 13 4 t1118; 7 13 7 t1124; 8 4 6 t1150; 8 5 7 t1151; 8 6 4 t1150; 8 7 5 t1151; 8 9 13 ones; 8 10 12 -ones; 8 12 10 -ones; 8 13 9 ones; 9 4 5 t1151; 9 5 4 t1151; 9 6 7 t1151; 9 7 6 t1151; 9 8 13 -ones; 9 10 11 ones; 9 11 10 ones; 9 13 8 -ones; 10 5 5 t1149; 10 6 6 t1149; 10 8 12 ones; 10 9 11 -ones; 10 11 9 -ones; 10 12 8 ones; 10 14 14 t1148; 10 15 15 t1148; 10 16 16 t1148; 10 17 17 t1148; 11 12 13 -t1171; 11 12 14 -t1127; 11 12 15 t1127; 11 12 16 -t1127; 11 12 17 t1127; 11 13 12 -t1171; 11 14 12 -t1127; 11 15 12 t1127; 11 15 15 2 * t1168; 11 16 12 -t1127; 11 17 12 t1127; 11 17 17 -2 * t1168; 12 11 13 t1107; 12 11 14 t1126; 12 11 15 -t1126; 12 11 16 t1126; 12 11 17 -t1126; 12 13 11 t1107; 12 14 11 t1126; 12 14 14 -2 * t1169; 12 15 11 -t1126; 12 16 11 t1126; 12 16 16 2 * t1169; 12 17 11 -t1126; 13 11 12 -t1170; 13 12 11 -t1170; 13 14 14 t1109; 13 15 15 t1108; 13 16 16 t1109; 13 17 17 t1108;];

            res = t1;
        end
        
        function res = getHTilde(obj, y, u)
            
            res = zeros(13, 17, 17);
            H_ = obj.HTilde(y, u);
            for i = 1:size(H_, 1)
                res(H_(i, 1), H_(i, 2), H_(i, 3)) = H_(i, 4);
            end
            
        end
        
        function [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj, varargin)
            
            if nargin == 3            
                y = varargin{1};
                u = varargin{2};
            else
                y = obj.state;
                u   = obj.contr;
            end
            q   = y(4:7, :);
            v   = y(8:10, :);
            omega   = y(11:13, :);
            
            Iges = obj.robot.I;
            IM = obj.robot.I_M;
            m = obj.robot.m;
            
            kT  = obj.robot.kT;
            kQ  = obj.robot.kQ;
            d   = obj.robot.d;
            g   = obj.environment.g;
        end
        
    end
    
end