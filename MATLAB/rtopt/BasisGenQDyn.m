classdef(Abstract) BasisGenQDyn < Dyn
    %BASISGENQDYN wird von MAPLE/PYTHON generiert und enthÃ¤lt die
    %Berechnung der Ableitungen
    
    properties
        F;
        J;
        H;
        
    end
    
    properties(GetAccess=private, SetAccess = protected)
        isEmptyF;
        isEmptyJ;
        isEmptyH;
    end
    
    methods
        function cBGQD = BasisGenQDyn()
            cBGQD.emptyResults();
        end
        
        function emptyResults(obj)
            
            obj.F   = [];
            obj.J  = [];
            obj.H = [];
            
            obj.isEmptyF = true;
            obj.isEmptyJ = true;
            obj.isEmptyH = true;
        end
        
        function res = get.F(obj)
            if obj.isEmptyF
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                t141 = -2 .* g;
t115 = v(3, :);
t140 = 2 .* t115;
t116 = v(2, :);
t139 = 2 .* t116;
t117 = v(1, :);
t138 = 2 .* t117;
t137 = (kT .* d);
t118 = u(4, :);
t119 = u(3, :);
t120 = u(2, :);
t121 = u(1, :);
t136 = (IM .* (t121 - t120 + t119 - t118));
t122 = q(4, :);
t135 = -t122 ./ 0.2e1;
t123 = q(3, :);
t134 = -t123 ./ 0.2e1;
t124 = q(2, :);
t133 = -t124 ./ 0.2e1;
t125 = q(1, :);
t132 = t125 ./ 0.2e1;
t131 = 0.1e1 - 0.2e1 .* t124 .^ 2;
t130 = t125 .* t122;
t129 = t125 .* t123;
t128 = t125 .* t124;
t105 = (t118 .^ 2);
t107 = (t120 .^ 2);
t127 = (t105 + t107);
t106 = (t119 .^ 2);
t108 = (t121 .^ 2);
t126 = (-t106 - t108);
t114 = Iges(1);
t113 = Iges(2);
t112 = Iges(3);
t111 = omega(1, :);
t110 = omega(2, :);
t109 = omega(3, :);
t103 = -0.2e1 .* t123 .^ 2;
t102 = -0.2e1 .* t122 .^ 2;
t101 = t124 .* t123;
t100 = t124 .* t122;
t99 = t123 .* t122;
t98 = t103 + t131;
t96 = t128 + t99;
t95 = -t129 + t100;
t1 = [(0.1e1 + t103 + t102) .* t117 + (-t130 + t101) .* t139 + (t129 + t100) .* t140; (t102 + t131) .* t116 + (t130 + t101) .* t138 + (-t128 + t99) .* t140; t98 .* t115 + t95 .* t138 + t96 .* t139; t111 .* t133 + t110 .* t134 + t109 .* t135; t111 .* t132 + t123 .* t109 ./ 0.2e1 + t110 .* t135; t110 .* t132 + t109 .* t133 + t122 .* t111 ./ 0.2e1; t109 .* t132 + t124 .* t110 ./ 0.2e1 + t111 .* t134; -t110 .* t115 + t109 .* t116 + t95 .* t141; -t109 .* t117 + t111 .* t115 + t96 .* t141; 0.1e1 ./ m .* (kT .* (-t126 + t127) - m .* (t111 .* t116 - t110 .* t117 + t98 .* g)); 0.1e1 ./ t114 .* ((t107 - t105) .* t137 + (-t136 + (-t112 + t113) .* t109) .* t110); 0.1e1 ./ t113 .* ((t106 - t108) .* t137 + (t136 + (-t114 + t112) .* t109) .* t111); 0.1e1 ./ t112 .* (kQ .* (t126 + t127) + (-t113 + t114) .* t111 .* t110);];

                
                obj.F = t1;
                obj.isEmptyF = false;
            end
            res = obj.F;
        end
        
        function res = get.J(obj)
            if obj.isEmptyJ
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                t369 = kT .* d;
t338 = q(3, :);
t368 = t338 .* g;
t339 = q(2, :);
t367 = t339 .* g;
t340 = q(1, :);
t366 = t340 .* g;
t365 = 1 - 2 .* t339 .^ 2;
t333 = u(4, :);
t334 = u(3, :);
t335 = u(2, :);
t336 = u(1, :);
t364 = (IM .* (t336 - t335 + t334 - t333));
t327 = Iges(3);
t321 = 1 ./ t327;
t363 = kQ .* t321;
t362 = -2 .* t369;
t361 = 2 .* t369;
t328 = Iges(2);
t322 = 0.1e1 ./ t328;
t326 = omega(1, :);
t360 = (t322 .* t326);
t329 = Iges(1);
t323 = 0.1e1 ./ t329;
t325 = omega(2, :);
t359 = (t323 .* t325);
t331 = v(2, :);
t337 = q(4, :);
t358 = t337 .* t331;
t332 = v(1, :);
t357 = t338 .* t332;
t330 = v(3, :);
t356 = t339 .* t330;
t355 = t340 .* t330;
t354 = t340 .* t331;
t353 = t340 .* t332;
t352 = t340 .* t337;
t351 = t340 .* t338;
t350 = t340 .* t339;
t349 = (-t327 + t328);
t348 = (-t329 + t327);
t347 = -2 .* t363;
t346 = 2 .* t363;
t345 = 2 ./ m .* kT;
t344 = IM .* t360;
t343 = IM .* t359;
t342 = (t321 .* (-t328 + t329));
t324 = omega(3, :);
t320 = t340 ./ 0.2e1;
t319 = -t339 ./ 0.2e1;
t318 = -t338 ./ 0.2e1;
t317 = -t337 ./ 0.2e1;
t315 = -2 .* t338 .^ 2;
t314 = -2 .* t337 .^ 2;
t313 = -t326 ./ 0.2e1;
t312 = t326 ./ 0.2e1;
t311 = -t325 ./ 0.2e1;
t310 = t325 ./ 0.2e1;
t309 = -t324 ./ 0.2e1;
t308 = t324 ./ 0.2e1;
t307 = -2 .* t367;
t306 = -2 .* t337 .* g;
t305 = IM .* t326;
t304 = IM .* t325;
t303 = t339 .* t338;
t302 = t339 .* t337;
t301 = t339 .* t332;
t300 = t339 .* t331;
t299 = t338 .* t337;
t298 = t338 .* t331;
t297 = t338 .* t330;
t296 = t337 .* t332;
t295 = t337 .* t330;
t1 = [1 4 -2 .* t358 + 2 .* t297; 1 5 2 .* t298 + 2 .* t295; 1 6 -4 .* t357 + 2 .* t300 + 2 .* t355; 1 7 -4 .* t296 - 2 .* t354 + 2 .* t356; 1 8 1 + t315 + t314; 1 9 -2 .* t352 + 2 .* t303; 1 10 2 .* t351 + 2 .* t302; 2 4 2 .* t296 - 2 .* t356; 2 5 2 .* t357 - 4 .* t300 - 2 .* t355; 2 6 2 .* t301 + 2 .* t295; 2 7 2 .* t353 - 4 .* t358 + 2 .* t297; 2 8 2 .* t352 + 2 .* t303; 2 9 t314 + t365; 2 10 -2 .* t350 + 2 .* t299; 3 4 -2 .* t357 + 2 .* t300; 3 5 2 .* t296 + 2 .* t354 - 4 .* t356; 3 6 -2 .* t353 + 2 .* t358 - 4 .* t297; 3 7 2 .* t301 + 2 .* t298; 3 8 -2 .* t351 + 2 .* t302; 3 9 2 .* t350 + 2 .* t299; 3 10 t315 + t365; 4 5 t313; 4 6 t311; 4 7 t309; 4 11 t319; 4 12 t318; 4 13 t317; 5 4 t312; 5 6 t308; 5 7 t311; 5 11 t320; 5 12 t317; 5 13 t338 ./ 0.2e1; 6 4 t310; 6 5 t309; 6 7 t312; 6 11 t337 ./ 0.2e1; 6 12 t320; 6 13 t319; 7 4 t308; 7 5 t310; 7 6 t313; 7 11 t318; 7 12 t339 ./ 0.2e1; 7 13 t320; 8 4 2 .* t368; 8 5 t306; 8 6 2 .* t366; 8 7 t307; 8 9 t324; 8 10 -t325; 8 12 -t330; 8 13 t331; 9 4 t307; 9 5 -2 .* t366; 9 6 t306; 9 7 -2 .* t368; 9 8 -t324; 9 10 t326; 9 11 t330; 9 13 -t332; 10 5 4 .* t367; 10 6 4 .* t368; 10 8 t325; 10 9 -t326; 10 11 -t331; 10 12 t332; 10 14 t336 .* t345; 10 15 t335 .* t345; 10 16 t334 .* t345; 10 17 t333 .* t345; 11 12 t323 .* (-t364 + t349 .* t324); 11 13 t349 .* t359; 11 14 -t343; 11 15 t323 .* ((t335 .* t361) + t304); 11 16 -t343; 11 17 t323 .* ((t333 .* t362) + t304); 12 11 t322 .* (t364 + t348 .* t324); 12 13 t348 .* t360; 12 14 t322 .* ((t336 .* t362) + t305); 12 15 -t344; 12 16 t322 .* ((t334 .* t361) + t305); 12 17 -t344; 13 11 t325 .* t342; 13 12 t326 .* t342; 13 14 t336 .* t347; 13 15 t335 .* t346; 13 16 t334 .* t347; 13 17 t333 .* t346;];

                
                obj.J = t1;
                obj.isEmptyJ = false;
            end
            res = obj.J;
        end
        
        function res = get.H(obj)
            if obj.isEmptyH
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                onesV = ones(1, obj.environment.n_timepoints); %Korregiere die Matrix Dimension
                
                t555 = g .* onesV;
t554 = kT .* onesV;
t530 = Iges(3);
t553 = onesV ./ t530;
t531 = Iges(2);
t526 = 1 ./ t531;
t552 = onesV .* t526;
t532 = Iges(1);
t527 = 1 ./ t532;
t551 = onesV .* t527;
t550 = v(3, :) .* onesV;
t549 = v(2, :) .* onesV;
t548 = v(1, :) .* onesV;
t547 = q(4, :) .* onesV;
t546 = q(3, :) .* onesV;
t545 = q(2, :) .* onesV;
t544 = q(1, :) .* onesV;
t543 = d .* t554;
t542 = kQ .* t553;
t541 = t526 .* t543;
t540 = t527 .* t543;
t529 = -onesV ./ 0.2e1;
t528 = onesV ./ 0.2e1;
t524 = -2 .* t555;
t523 = 2 .* t555;
t522 = 4 .* t555;
t521 = 2 ./ m .* t554;
t520 = -2 .* t544;
t519 = 2 .* t544;
t518 = -4 .* t545;
t517 = -2 .* t545;
t516 = 2 .* t545;
t515 = -4 .* t546;
t514 = -2 .* t546;
t513 = 2 .* t546;
t512 = -4 .* t547;
t511 = -2 .* t547;
t510 = 2 .* t547;
t509 = -4 .* t548;
t508 = -2 .* t548;
t507 = 2 .* t548;
t506 = -4 .* t549;
t505 = -2 .* t549;
t504 = 2 .* t549;
t503 = -4 .* t550;
t502 = -2 .* t550;
t501 = 2 .* t550;
t500 = IM .* t551;
t499 = IM .* t552;
t498 = -2 .* t542;
t497 = 2 .* t542;
t496 = (-t530 + t531) .* t551;
t495 = (-t532 + t530) .* t552;
t494 = (-t531 + t532) .* t553;
t1 = [1 4 6 t501; 1 4 7 t505; 1 4 9 t511; 1 4 10 t513; 1 5 6 t504; 1 5 7 t501; 1 5 9 t513; 1 5 10 t510; 1 6 4 t501; 1 6 5 t504; 1 6 6 t509; 1 6 8 t515; 1 6 9 t516; 1 6 10 t519; 1 7 4 t505; 1 7 5 t501; 1 7 7 t509; 1 7 8 t512; 1 7 9 t520; 1 7 10 t516; 1 8 6 t515; 1 8 7 t512; 1 9 4 t511; 1 9 5 t513; 1 9 6 t516; 1 9 7 t520; 1 10 4 t513; 1 10 5 t510; 1 10 6 t519; 1 10 7 t516; 2 4 5 t502; 2 4 7 t507; 2 4 8 t510; 2 4 10 t517; 2 5 4 t502; 2 5 5 t506; 2 5 6 t507; 2 5 8 t513; 2 5 9 t518; 2 5 10 t520; 2 6 5 t507; 2 6 7 t501; 2 6 8 t516; 2 6 10 t510; 2 7 4 t507; 2 7 6 t501; 2 7 7 t506; 2 7 8 t519; 2 7 9 t512; 2 7 10 t513; 2 8 4 t510; 2 8 5 t513; 2 8 6 t516; 2 8 7 t519; 2 9 5 t518; 2 9 7 t512; 2 10 4 t517; 2 10 5 t520; 2 10 6 t510; 2 10 7 t513; 3 4 5 t504; 3 4 6 t508; 3 4 8 t514; 3 4 9 t516; 3 5 4 t504; 3 5 5 t503; 3 5 7 t507; 3 5 8 t510; 3 5 9 t519; 3 5 10 t518; 3 6 4 t508; 3 6 6 t503; 3 6 7 t504; 3 6 8 t520; 3 6 9 t510; 3 6 10 t515; 3 7 5 t507; 3 7 6 t504; 3 7 8 t516; 3 7 9 t513; 3 8 4 t514; 3 8 5 t510; 3 8 6 t520; 3 8 7 t516; 3 9 4 t516; 3 9 5 t519; 3 9 6 t510; 3 9 7 t513; 3 10 5 t518; 3 10 6 t515; 4 5 11 t529; 4 6 12 t529; 4 7 13 t529; 4 11 5 t529; 4 12 6 t529; 4 13 7 t529; 5 4 11 t528; 5 6 13 t528; 5 7 12 t529; 5 11 4 t528; 5 12 7 t529; 5 13 6 t528; 6 4 12 t528; 6 5 13 t529; 6 7 11 t528; 6 11 7 t528; 6 12 4 t528; 6 13 5 t529; 7 4 13 t528; 7 5 12 t528; 7 6 11 t529; 7 11 6 t529; 7 12 5 t528; 7 13 4 t528; 8 4 6 t523; 8 5 7 t524; 8 6 4 t523; 8 7 5 t524; 8 9 13 onesV; 8 10 12 -onesV; 8 12 10 -onesV; 8 13 9 onesV; 9 4 5 t524; 9 5 4 t524; 9 6 7 t524; 9 7 6 t524; 9 8 13 -onesV; 9 10 11 onesV; 9 11 10 onesV; 9 13 8 -onesV; 10 5 5 t522; 10 6 6 t522; 10 8 12 onesV; 10 9 11 -onesV; 10 11 9 -onesV; 10 12 8 onesV; 10 14 14 t521; 10 15 15 t521; 10 16 16 t521; 10 17 17 t521; 11 12 13 t496; 11 12 14 -t500; 11 12 15 t500; 11 12 16 -t500; 11 12 17 t500; 11 13 12 t496; 11 14 12 -t500; 11 15 12 t500; 11 15 15 2 .* t540; 11 16 12 -t500; 11 17 12 t500; 11 17 17 -2 .* t540; 12 11 13 t495; 12 11 14 t499; 12 11 15 -t499; 12 11 16 t499; 12 11 17 -t499; 12 13 11 t495; 12 14 11 t499; 12 14 14 -2 .* t541; 12 15 11 -t499; 12 16 11 t499; 12 16 16 2 .* t541; 12 17 11 -t499; 13 11 12 t494; 13 12 11 t494; 13 14 14 t498; 13 15 15 t497; 13 16 16 t498; 13 17 17 t497;];

                
                obj.H = t1;
                obj.isEmptyH = false;
            end
            res = obj.H;
        end
        
        function [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj)
            q   = obj.state(4:7    , :);
            v   = obj.state(8:10   , :);
            omega   = obj.state(11:13  , :);
            u   = obj.contr;
            
            
            Iges = obj.robot.I;
            IM = obj.robot.I_M;
            m = obj.robot.m;
            
            kT  = obj.robot.kT;
            kQ  = obj.robot.kQ;
            d   = obj.robot.d;
            g   = obj.environment.g;
        end
        
    end
    
end