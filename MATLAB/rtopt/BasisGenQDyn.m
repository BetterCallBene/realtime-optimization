classdef(Abstract) BasisGenQDyn < Dyn
    %BASISGENQDYN wird von MAPLE/PYTHON generiert und enthÃ¤lt die
    %Berechnung der Ableitungen
    
    properties
        F;
        J;
        H;
        
    end
    
    properties(GetAccess=private, SetAccess = protected)
        isEmptyF;
        isEmptyJ;
        isEmptyH;
    end
    
    methods
        function cBGQD = BasisGenQDyn()
            cBGQD.emptyResults();
        end
        
        function emptyResults(obj)
            
            obj.F   = [];
            obj.J  = [];
            obj.H = [];
            
            obj.isEmptyF = true;
            obj.isEmptyJ = true;
            obj.isEmptyH = true;
        end
        
        function res = get.F(obj)
            if obj.isEmptyF
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                t141 = -2 .* g;
t115 = v(3, :);
t140 = 2 .* t115;
t116 = v(2, :);
t139 = 2 .* t116;
t117 = v(1, :);
t138 = 2 .* t117;
t137 = (d .* kT);
t118 = u(4, :);
t119 = u(3, :);
t120 = u(2, :);
t121 = u(1, :);
t135 = ((t121 - t120 + t119 - t118) .* IM);
t122 = q(4, :);
t134 = -t122 ./ 0.2e1;
t123 = q(3, :);
t133 = -t123 ./ 0.2e1;
t124 = q(2, :);
t132 = -t124 ./ 0.2e1;
t125 = q(1, :);
t131 = t125 ./ 0.2e1;
t130 = 0.1e1 - 0.2e1 .* t124 .^ 2;
t129 = t125 .* t122;
t128 = t125 .* t123;
t127 = t125 .* t124;
t114 = Iges(1);
t113 = Iges(2);
t112 = Iges(3);
t111 = omega(1, :);
t110 = omega(2, :);
t109 = omega(3, :);
t108 = (t121 .^ 2);
t107 = (t120 .^ 2);
t106 = (t119 .^ 2);
t105 = (t118 .^ 2);
t103 = -0.2e1 .* t123 .^ 2;
t102 = -0.2e1 .* t122 .^ 2;
t101 = t124 .* t123;
t100 = t124 .* t122;
t99 = t123 .* t122;
t98 = t103 + t130;
t96 = t127 + t99;
t95 = -t128 + t100;
t1 = [(0.1e1 + t103 + t102) .* t117 + (-t129 + t101) .* t139 + (t128 + t100) .* t140; (t102 + t130) .* t116 + (t129 + t101) .* t138 + (-t127 + t99) .* t140; t98 .* t115 + t95 .* t138 + t96 .* t139; t111 .* t132 + t110 .* t133 + t109 .* t134; t111 .* t131 + t110 .* t134 + t123 .* t109 ./ 0.2e1; t122 .* t111 ./ 0.2e1 + t110 .* t131 + t109 .* t132; t111 .* t133 + t124 .* t110 ./ 0.2e1 + t109 .* t131; -t110 .* t115 + t109 .* t116 + t95 .* t141; -t109 .* t117 + t111 .* t115 + t96 .* t141; -t111 .* t116 + t110 .* t117 - t98 .* g; 0.1e1 ./ t114 .* ((-t105 + t107) .* t137 + (-t135 + (-t112 + t113) .* t109) .* t110); 0.1e1 ./ t113 .* ((t106 - t108) .* t137 + (t135 + (-t114 + t112) .* t109) .* t111); 0.1e1 ./ t112 .* ((-t113 + t114) .* t111 .* t110 + (-t106 + t105 - t108 + t107) .* kQ);];

                
                obj.F = t1;
                obj.isEmptyF = false;
            end
            res = obj.F;
        end
        
        function res = get.J(obj)
            if obj.isEmptyJ
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                t363 = d .* kT;
t334 = q(3, :);
t362 = t334 .* g;
t335 = q(2, :);
t361 = t335 .* g;
t336 = q(1, :);
t360 = t336 .* g;
t359 = 1 - 2 .* t335 .^ 2;
t323 = Iges(3);
t317 = 1 ./ t323;
t358 = kQ .* t317;
t329 = u(4, :);
t330 = u(3, :);
t331 = u(2, :);
t332 = u(1, :);
t357 = ((t332 - t331 + t330 - t329) .* IM);
t356 = -2 .* t363;
t355 = 2 .* t363;
t324 = Iges(2);
t318 = 0.1e1 ./ t324;
t322 = omega(1, :);
t354 = (t318 .* t322);
t325 = Iges(1);
t319 = 0.1e1 ./ t325;
t321 = omega(2, :);
t353 = (t319 .* t321);
t327 = v(2, :);
t333 = q(4, :);
t352 = t333 .* t327;
t328 = v(1, :);
t351 = t334 .* t328;
t326 = v(3, :);
t350 = t335 .* t326;
t349 = t336 .* t326;
t348 = t336 .* t327;
t347 = t336 .* t328;
t346 = t336 .* t333;
t345 = t336 .* t334;
t344 = t336 .* t335;
t343 = (-t323 + t324);
t342 = (-t325 + t323);
t341 = -2 .* t358;
t340 = 2 .* t358;
t339 = IM .* t354;
t338 = IM .* t353;
t337 = (t317 .* (-t324 + t325));
t320 = omega(3, :);
t316 = t336 ./ 0.2e1;
t315 = -t335 ./ 0.2e1;
t314 = -t334 ./ 0.2e1;
t313 = -t333 ./ 0.2e1;
t311 = -2 .* t334 .^ 2;
t310 = -2 .* t333 .^ 2;
t309 = -t322 ./ 0.2e1;
t308 = t322 ./ 0.2e1;
t307 = -t321 ./ 0.2e1;
t306 = t321 ./ 0.2e1;
t305 = -t320 ./ 0.2e1;
t304 = t320 ./ 0.2e1;
t303 = -2 .* t361;
t302 = -2 .* t333 .* g;
t301 = IM .* t322;
t300 = IM .* t321;
t299 = t335 .* t334;
t298 = t335 .* t333;
t297 = t335 .* t328;
t296 = t335 .* t327;
t295 = t334 .* t333;
t294 = t334 .* t327;
t293 = t334 .* t326;
t292 = t333 .* t328;
t291 = t333 .* t326;
t1 = [1 4 -2 .* t352 + 2 .* t293; 1 5 2 .* t294 + 2 .* t291; 1 6 -4 .* t351 + 2 .* t296 + 2 .* t349; 1 7 -4 .* t292 - 2 .* t348 + 2 .* t350; 1 8 1 + t311 + t310; 1 9 -2 .* t346 + 2 .* t299; 1 10 2 .* t345 + 2 .* t298; 2 4 2 .* t292 - 2 .* t350; 2 5 2 .* t351 - 4 .* t296 - 2 .* t349; 2 6 2 .* t297 + 2 .* t291; 2 7 2 .* t347 - 4 .* t352 + 2 .* t293; 2 8 2 .* t346 + 2 .* t299; 2 9 t310 + t359; 2 10 -2 .* t344 + 2 .* t295; 3 4 -2 .* t351 + 2 .* t296; 3 5 2 .* t292 + 2 .* t348 - 4 .* t350; 3 6 -2 .* t347 + 2 .* t352 - 4 .* t293; 3 7 2 .* t297 + 2 .* t294; 3 8 -2 .* t345 + 2 .* t298; 3 9 2 .* t344 + 2 .* t295; 3 10 t311 + t359; 4 5 t309; 4 6 t307; 4 7 t305; 4 11 t315; 4 12 t314; 4 13 t313; 5 4 t308; 5 6 t304; 5 7 t307; 5 11 t316; 5 12 t313; 5 13 t334 ./ 0.2e1; 6 4 t306; 6 5 t305; 6 7 t308; 6 11 t333 ./ 0.2e1; 6 12 t316; 6 13 t315; 7 4 t304; 7 5 t306; 7 6 t309; 7 11 t314; 7 12 t335 ./ 0.2e1; 7 13 t316; 8 4 2 .* t362; 8 5 t302; 8 6 2 .* t360; 8 7 t303; 8 9 t320; 8 10 -t321; 8 12 -t326; 8 13 t327; 9 4 t303; 9 5 -2 .* t360; 9 6 t302; 9 7 -2 .* t362; 9 8 -t320; 9 10 t322; 9 11 t326; 9 13 -t328; 10 5 4 .* t361; 10 6 4 .* t362; 10 8 t321; 10 9 -t322; 10 11 -t327; 10 12 t328; 11 12 t319 .* (-t357 + t343 .* t320); 11 13 t343 .* t353; 11 14 -t338; 11 15 t319 .* ((t331 .* t355) + t300); 11 16 -t338; 11 17 t319 .* ((t329 .* t356) + t300); 12 11 t318 .* (t357 + t342 .* t320); 12 13 t342 .* t354; 12 14 t318 .* ((t332 .* t356) + t301); 12 15 -t339; 12 16 t318 .* ((t330 .* t355) + t301); 12 17 -t339; 13 11 t321 .* t337; 13 12 t322 .* t337; 13 14 t332 .* t341; 13 15 t331 .* t340; 13 16 t330 .* t341; 13 17 t329 .* t340;];

                
                obj.J = t1;
                obj.isEmptyJ = false;
            end
            res = obj.J;
        end
        
        function res = get.H(obj)
            if obj.isEmptyH
                [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj);
                
                onesV = ones(1, obj.environment.n_timepoints); %Korregiere die Matrix Dimension
                
                t543 = g .* onesV;
t519 = Iges(3);
t542 = onesV ./ t519;
t520 = Iges(2);
t515 = 1 ./ t520;
t541 = onesV .* t515;
t521 = Iges(1);
t516 = 1 ./ t521;
t540 = onesV .* t516;
t539 = v(3, :) .* onesV;
t538 = v(2, :) .* onesV;
t537 = v(1, :) .* onesV;
t536 = q(4, :) .* onesV;
t535 = q(3, :) .* onesV;
t534 = q(2, :) .* onesV;
t533 = q(1, :) .* onesV;
t532 = d .* kT .* onesV;
t531 = kQ .* t542;
t530 = t515 .* t532;
t529 = t516 .* t532;
t518 = -onesV ./ 0.2e1;
t517 = onesV ./ 0.2e1;
t513 = -2 .* t543;
t512 = 2 .* t543;
t511 = 4 .* t543;
t510 = -2 .* t533;
t509 = 2 .* t533;
t508 = -4 .* t534;
t507 = -2 .* t534;
t506 = 2 .* t534;
t505 = -4 .* t535;
t504 = -2 .* t535;
t503 = 2 .* t535;
t502 = -4 .* t536;
t501 = -2 .* t536;
t500 = 2 .* t536;
t499 = -4 .* t537;
t498 = -2 .* t537;
t497 = 2 .* t537;
t496 = -4 .* t538;
t495 = -2 .* t538;
t494 = 2 .* t538;
t493 = -4 .* t539;
t492 = -2 .* t539;
t491 = 2 .* t539;
t490 = IM .* t540;
t489 = IM .* t541;
t488 = -2 .* t531;
t487 = 2 .* t531;
t486 = (-t519 + t520) .* t540;
t485 = (-t521 + t519) .* t541;
t484 = (-t520 + t521) .* t542;
t1 = [1 4 6 t491; 1 4 7 t495; 1 4 9 t501; 1 4 10 t503; 1 5 6 t494; 1 5 7 t491; 1 5 9 t503; 1 5 10 t500; 1 6 4 t491; 1 6 5 t494; 1 6 6 t499; 1 6 8 t505; 1 6 9 t506; 1 6 10 t509; 1 7 4 t495; 1 7 5 t491; 1 7 7 t499; 1 7 8 t502; 1 7 9 t510; 1 7 10 t506; 1 8 6 t505; 1 8 7 t502; 1 9 4 t501; 1 9 5 t503; 1 9 6 t506; 1 9 7 t510; 1 10 4 t503; 1 10 5 t500; 1 10 6 t509; 1 10 7 t506; 2 4 5 t492; 2 4 7 t497; 2 4 8 t500; 2 4 10 t507; 2 5 4 t492; 2 5 5 t496; 2 5 6 t497; 2 5 8 t503; 2 5 9 t508; 2 5 10 t510; 2 6 5 t497; 2 6 7 t491; 2 6 8 t506; 2 6 10 t500; 2 7 4 t497; 2 7 6 t491; 2 7 7 t496; 2 7 8 t509; 2 7 9 t502; 2 7 10 t503; 2 8 4 t500; 2 8 5 t503; 2 8 6 t506; 2 8 7 t509; 2 9 5 t508; 2 9 7 t502; 2 10 4 t507; 2 10 5 t510; 2 10 6 t500; 2 10 7 t503; 3 4 5 t494; 3 4 6 t498; 3 4 8 t504; 3 4 9 t506; 3 5 4 t494; 3 5 5 t493; 3 5 7 t497; 3 5 8 t500; 3 5 9 t509; 3 5 10 t508; 3 6 4 t498; 3 6 6 t493; 3 6 7 t494; 3 6 8 t510; 3 6 9 t500; 3 6 10 t505; 3 7 5 t497; 3 7 6 t494; 3 7 8 t506; 3 7 9 t503; 3 8 4 t504; 3 8 5 t500; 3 8 6 t510; 3 8 7 t506; 3 9 4 t506; 3 9 5 t509; 3 9 6 t500; 3 9 7 t503; 3 10 5 t508; 3 10 6 t505; 4 5 11 t518; 4 6 12 t518; 4 7 13 t518; 4 11 5 t518; 4 12 6 t518; 4 13 7 t518; 5 4 11 t517; 5 6 13 t517; 5 7 12 t518; 5 11 4 t517; 5 12 7 t518; 5 13 6 t517; 6 4 12 t517; 6 5 13 t518; 6 7 11 t517; 6 11 7 t517; 6 12 4 t517; 6 13 5 t518; 7 4 13 t517; 7 5 12 t517; 7 6 11 t518; 7 11 6 t518; 7 12 5 t517; 7 13 4 t517; 8 4 6 t512; 8 5 7 t513; 8 6 4 t512; 8 7 5 t513; 8 9 13 onesV; 8 10 12 -onesV; 8 12 10 -onesV; 8 13 9 onesV; 9 4 5 t513; 9 5 4 t513; 9 6 7 t513; 9 7 6 t513; 9 8 13 -onesV; 9 10 11 onesV; 9 11 10 onesV; 9 13 8 -onesV; 10 5 5 t511; 10 6 6 t511; 10 8 12 onesV; 10 9 11 -onesV; 10 11 9 -onesV; 10 12 8 onesV; 11 12 13 t486; 11 12 14 -t490; 11 12 15 t490; 11 12 16 -t490; 11 12 17 t490; 11 13 12 t486; 11 14 12 -t490; 11 15 12 t490; 11 15 15 2 .* t529; 11 16 12 -t490; 11 17 12 t490; 11 17 17 -2 .* t529; 12 11 13 t485; 12 11 14 t489; 12 11 15 -t489; 12 11 16 t489; 12 11 17 -t489; 12 13 11 t485; 12 14 11 t489; 12 14 14 -2 .* t530; 12 15 11 -t489; 12 16 11 t489; 12 16 16 2 .* t530; 12 17 11 -t489; 13 11 12 t484; 13 12 11 t484; 13 14 14 t488; 13 15 15 t487; 13 16 16 t488; 13 17 17 t487;];

                
                obj.H = t1;
                obj.isEmptyH = false;
            end
            res = obj.H;
        end
        
        function [q,v,omega,u,Iges,IM,m,kT,kQ,d,g] = getParams(obj)
            q   = obj.state(4:7    , :);
            v   = obj.state(8:10   , :);
            omega   = obj.state(11:13  , :);
            u   = obj.contr;
            
            
            Iges = obj.robot.I;
            IM = obj.robot.I_M;
            m = obj.robot.m;
            
            kT  = obj.robot.kT;
            kQ  = obj.robot.kQ;
            d   = obj.robot.d;
            g   = obj.environment.g;
        end
        
    end
    
end